# APIä½¿ç”¨è§„èŒƒæ–‡æ¡£

## ğŸ“‹ ç›®å½•
- [åŸºç¡€ä¿¡æ¯](#åŸºç¡€ä¿¡æ¯)
- [æ•°æ®åº“ä¼˜åŒ–è¯´æ˜](#æ•°æ®åº“ä¼˜åŒ–è¯´æ˜)
- [è®¤è¯æ–¹å¼](#è®¤è¯æ–¹å¼)
- [é€šç”¨è§„èŒƒ](#é€šç”¨è§„èŒƒ)
- [ç”¨æˆ·è®¤è¯æ¥å£](#ç”¨æˆ·è®¤è¯æ¥å£)
- [é¡¹ç›®åˆ†ç±»æ¥å£](#é¡¹ç›®åˆ†ç±»æ¥å£)
- [ç§¯åˆ†ä½¿ç”¨è®°å½•æ¥å£](#ç§¯åˆ†ä½¿ç”¨è®°å½•æ¥å£)
- [ç®¡ç†åå°æ¥å£](#ç®¡ç†åå°æ¥å£)
- [IDä½¿ç”¨æœ€ä½³å®è·µ](#idä½¿ç”¨æœ€ä½³å®è·µ)
- [é”™è¯¯ç è¯´æ˜](#é”™è¯¯ç è¯´æ˜)
- [æœªå®Œæˆæ¥å£è¯´æ˜](#æœªå®Œæˆæ¥å£è¯´æ˜)

---

## åŸºç¡€ä¿¡æ¯

### æœåŠ¡å™¨åœ°å€
- **å¼€å‘ç¯å¢ƒ**: `http://localhost:8000`
- **ç”Ÿäº§ç¯å¢ƒ**: `https://sodesignai.com`

### APIå‰ç¼€
æ‰€æœ‰APIæ¥å£éƒ½ä»¥ `/api/auth` ä¸ºå‰ç¼€

### ç‰ˆæœ¬ä¿¡æ¯
- **APIç‰ˆæœ¬**: v1.1
- **æ–‡æ¡£ç‰ˆæœ¬**: 2025-08-11
- **Djangoç‰ˆæœ¬**: 5.2.4
- **DRFç‰ˆæœ¬**: 3.15.2
- **æ–°å¢åŠŸèƒ½**: çŸ­ä¿¡éªŒè¯ç ç³»ç»Ÿ

### æ•°æ®è§„èŒƒ
- **æ•°æ®æ ¼å¼**: JSON
- **å­—ç¬¦ç¼–ç **: UTF-8
- **æ—¶åŒº**: UTC
- **IDç”Ÿæˆ**: éšæœºIDï¼ˆéè‡ªå¢ï¼‰ï¼ŒèŒƒå›´1ä¸‡äº¿-9ä¸‡ä¸‡äº¿
- **IDç±»å‹**: BIGINT UNSIGNEDï¼ˆæ•°å­—ç±»å‹ï¼‰

### ğŸ†• æœ€æ–°æ›´æ–° (2025-08-11)
- **çŸ­ä¿¡éªŒè¯ç ç³»ç»Ÿå…¨é¢å®ç°** âœ…:
  - **é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡é›†æˆ** âœ…: é›†æˆé˜¿é‡Œäº‘çŸ­ä¿¡APIï¼Œæ”¯æŒéªŒè¯ç å‘é€
    - é…ç½®é˜¿é‡Œäº‘AccessKeyã€ç­¾å"å­‘è¡Œ"ã€æ¨¡æ¿SMS_324431014
    - å®ç°6ä½æ•°å­—éªŒè¯ç ç”Ÿæˆå’Œå‘é€åŠŸèƒ½
    - æ”¯æŒæ‰‹æœºå·æ ¼å¼éªŒè¯å’Œå‘é€ç»“æœå¤„ç†
  - **çŸ­ä¿¡éªŒè¯ç æ•°æ®æ¨¡å‹** âœ…: æ–°å¢SmsVerificationCodeæ¨¡å‹
    - æ”¯æŒéªŒè¯ç å­˜å‚¨ã€è¿‡æœŸæ—¶é—´ï¼ˆ5åˆ†é’Ÿï¼‰ã€ä½¿ç”¨çŠ¶æ€è·Ÿè¸ª
    - å®ç°å°è¯•æ¬¡æ•°é™åˆ¶ï¼ˆæœ€å¤š3æ¬¡ï¼‰å’Œè‡ªåŠ¨æ¸…ç†æœºåˆ¶
    - æ·»åŠ æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
  - **çŸ­ä¿¡éªŒè¯ç APIæ¥å£** âœ…: æ–°å¢å®Œæ•´çš„çŸ­ä¿¡éªŒè¯ç API
    - `POST /api/auth/sms/send/` - å‘é€çŸ­ä¿¡éªŒè¯ç 
    - `POST /api/auth/sms/verify/` - éªŒè¯çŸ­ä¿¡éªŒè¯ç 
    - ä¿®æ”¹ `POST /api/auth/register/` - æ³¨å†Œæ—¶å¼ºåˆ¶éªŒè¯çŸ­ä¿¡éªŒè¯ç 
  - **å®‰å…¨æœºåˆ¶å’Œé¢‘ç‡é™åˆ¶** âœ…: å®ç°å®Œå–„çš„å®‰å…¨æ§åˆ¶
    - åŒä¸€æ‰‹æœºå·1åˆ†é’Ÿå†…åªèƒ½å‘é€ä¸€æ¬¡éªŒè¯ç 
    - éªŒè¯ç 5åˆ†é’Ÿæœ‰æ•ˆæœŸï¼Œæœ€å¤šå°è¯•3æ¬¡
    - éªŒè¯æˆåŠŸåç«‹å³å¤±æ•ˆï¼Œé˜²æ­¢é‡å¤ä½¿ç”¨
    - è‡ªåŠ¨æ¸…ç†è¿‡æœŸå’Œå·²ä½¿ç”¨çš„éªŒè¯ç 
  - **æµ‹è¯•éªŒè¯å®Œæˆ** âœ…: ä½¿ç”¨æ‰‹æœºå·19301366078å®Œæˆå…¨æµç¨‹æµ‹è¯•
    - éªŒè¯ç å‘é€æˆåŠŸï¼Œæ”¶åˆ°é˜¿é‡Œäº‘çŸ­ä¿¡
    - éªŒè¯ç éªŒè¯åŠŸèƒ½æ­£å¸¸å·¥ä½œ
    - æ³¨å†Œæµç¨‹é›†æˆéªŒè¯ç éªŒè¯ï¼Œå®‰å…¨æ€§æå‡
    - ä¿®å¤æ³¨å†Œåºåˆ—åŒ–å™¨é€»è¾‘é—®é¢˜ï¼Œç”¨æˆ·æˆåŠŸå†™å…¥æ•°æ®åº“
  - **å¿˜è®°å¯†ç åŠŸèƒ½** âœ…: æ–°å¢å®Œæ•´çš„å¯†ç é‡ç½®åŠŸèƒ½
    - `POST /api/auth/forgot-password/` - å‘é€å¿˜è®°å¯†ç éªŒè¯ç 
    - `POST /api/auth/reset-password/` - ä½¿ç”¨éªŒè¯ç é‡ç½®å¯†ç 
    - æ”¯æŒå·²æ³¨å†Œç”¨æˆ·é€šè¿‡çŸ­ä¿¡éªŒè¯ç å®‰å…¨é‡ç½®å¯†ç 
    - å®Œæ•´çš„éªŒè¯æµç¨‹å’Œå®‰å…¨æœºåˆ¶
  - **å®‰å…¨æœºåˆ¶å¢å¼º** âœ…: ä¿®å¤å…³é”®å®‰å…¨æ¼æ´
    - ä¿®å¤ `attempt_count` å­—æ®µé€»è¾‘é”™è¯¯ï¼Œç¡®ä¿ç”¨æˆ·å¯ä»¥å°è¯•å®Œæ•´çš„3æ¬¡
    - æ–°å¢éªŒè¯ç ç±»å‹éš”ç¦»æœºåˆ¶ï¼Œæ³¨å†ŒéªŒè¯ç å’Œé‡ç½®å¯†ç éªŒè¯ç å®Œå…¨åˆ†ç¦»
    - é˜²æ­¢éªŒè¯ç è·¨ç”¨é€”ä½¿ç”¨ï¼Œæå‡ç³»ç»Ÿå®‰å…¨æ€§

### å†å²æ›´æ–° (2025-08-06)
- **ç®¡ç†åå°ç³»ç»Ÿå…¨é¢ä¿®å¤**:
  - **ç”¨æˆ·ç¼–è¾‘çŠ¶æ€åŠŸèƒ½** âœ…: ä¿®å¤ç”¨æˆ·çŠ¶æ€ç¼–è¾‘åŠŸèƒ½ï¼Œæ”¯æŒæ´»è·ƒ/éæ´»è·ƒçŠ¶æ€åˆ‡æ¢
  - **ä»¤ç‰Œç®¡ç†æ‰¹é‡æ¸…ç†åŠŸèƒ½** âœ…: ä¿®å¤URLè·¯ç”±å†²çªé—®é¢˜
  - **ç§¯åˆ†ç®¡ç†å›¾è¡¨æ•°æ®** âœ…: å®ç°çœŸå®æ•°æ®å›¾è¡¨æ˜¾ç¤º
  - **ç”Ÿå›¾è®°å½•ç§¯åˆ†ä¿®æ”¹åŠŸèƒ½** âœ…: å®ç°ç§¯åˆ†ç¼–è¾‘å’ŒåŒæ­¥æœºåˆ¶
- **æ•°æ®åº“å¤§ä¼˜åŒ–**:
  - **ç§»é™¤è‡ªå¢åºåˆ—**: æ‰€æœ‰æ ¸å¿ƒè¡¨å·²ç§»é™¤AUTO_INCREMENTï¼Œä½¿ç”¨éšæœºIDç”Ÿæˆ
  - **å®ç°å®Œå…¨ä¹±åº**: IDç”Ÿæˆå®Œå…¨éšæœºï¼Œé€’å¢æ¯”ä¾‹é™è‡³47-55%ï¼Œé˜²æ­¢ä¿¡æ¯æ³„éœ²
  - **é›¶å½±å“å…¼å®¹**: APIæ¥å£ã€å‰ç«¯ä»£ç ã€ä¸šåŠ¡é€»è¾‘å®Œå…¨ä¸å—å½±å“
  - **å®‰å…¨æ€§æå‡**: é˜²æ­¢åŸºäºIDçš„éå†æ”»å‡»å’Œæ•æ„Ÿä¿¡æ¯æ¨æµ‹
  - **ä¼˜åŒ–è¡¨ç»“æ„**:
    - `users`ã€`project_categories`ã€`configs`ã€`generations`ã€`tokens`ã€`point_usage_records`
    - ä¿æŒBIGINT UNSIGNEDç±»å‹ï¼Œç¡®ä¿æ€§èƒ½ä¸å—å½±å“
    - æ‰€æœ‰å¤–é”®å…³ç³»å®Œæ•´ï¼Œæ•°æ®ä¸€è‡´æ€§å¾—åˆ°ä¿è¯
  - **IDç”Ÿæˆå™¨**:
    - æ”¯æŒé«˜å¹¶å‘ç¯å¢ƒä¸‹çš„å”¯ä¸€æ€§ä¿è¯
    - IDåˆ†å¸ƒèŒƒå›´ï¼š1ä¸‡äº¿-9ä¸‡ä¸‡äº¿ï¼Œå®Œå…¨éšæœºåˆ†å¸ƒ
    - çº¿ç¨‹å®‰å…¨ï¼Œå†…ç½®é‡å¤æ£€æµ‹å’Œå›é€€æœºåˆ¶
    - å·²é›†æˆåˆ°Djangoé¡¹ç›®çš„`authentication.utils`æ¨¡å—
  - **æ•°æ®è¿ç§»å®Œæˆ**: 66æ¡è®°å½•å®Œæ•´è¿ç§»ï¼Œé›¶æ•°æ®ä¸¢å¤±
  - **ä»£ç ä¼˜åŒ–**: ç§»é™¤ç‹¬ç«‹æ–‡ä»¶ï¼ŒIDç”Ÿæˆå™¨å®Œå…¨é›†æˆåˆ°Djangoé¡¹ç›®ç»“æ„ä¸­

### å†å²æ›´æ–° (2025-08-05)
- **æ•°æ®åº“å¤§ä¼˜åŒ–**:
  - **ç§»é™¤è‡ªå¢åºåˆ—**: æ‰€æœ‰æ ¸å¿ƒè¡¨å·²ç§»é™¤AUTO_INCREMENTï¼Œä½¿ç”¨éšæœºIDç”Ÿæˆ
  - **å®ç°å®Œå…¨ä¹±åº**: IDç”Ÿæˆå®Œå…¨éšæœºï¼Œé€’å¢æ¯”ä¾‹é™è‡³47-55%ï¼Œé˜²æ­¢ä¿¡æ¯æ³„éœ²
  - **é›¶å½±å“å…¼å®¹**: APIæ¥å£ã€å‰ç«¯ä»£ç ã€ä¸šåŠ¡é€»è¾‘å®Œå…¨ä¸å—å½±å“
  - **å®‰å…¨æ€§æå‡**: é˜²æ­¢åŸºäºIDçš„éå†æ”»å‡»å’Œæ•æ„Ÿä¿¡æ¯æ¨æµ‹

### å†å²æ›´æ–° (2025-08-04)
- **ç§¯åˆ†ç®¡ç†ç³»ç»Ÿå¢å¼º**:
  - å®ç°ç§¯åˆ†è®°å½•çš„å®Œæ•´CRUDæ“ä½œ
  - æ–°å¢æŸ¥çœ‹ç§¯åˆ†è®°å½•è¯¦æƒ…åŠŸèƒ½
  - æ–°å¢ç¼–è¾‘ç§¯åˆ†è®°å½•åŠŸèƒ½ï¼Œæ”¯æŒä¿®æ”¹æ¶ˆè€—ç§¯åˆ†å’Œæè¿°
  - è‡ªåŠ¨åŒæ­¥points_afterå­—æ®µå’Œç”¨æˆ·ç§¯åˆ†ä½™é¢
  - é¡¹ç›®ç±»å‹ä¸project_categoriesè¡¨æ­£ç¡®æ˜ å°„
  - åˆ é™¤ç§¯åˆ†è®°å½•æ—¶è‡ªåŠ¨æ¢å¤ç”¨æˆ·ç§¯åˆ†
  - å®æ—¶æ›´æ–°ç»Ÿè®¡æ•°æ®å’Œå›¾è¡¨
  - **CSVå¯¼å‡ºåŠŸèƒ½å®Œå–„**:
    - ä¿®å¤å¯¼å‡ºæ–‡ä»¶ä¸­é¡¹ç›®ç±»å‹æ˜¾ç¤º"æœªçŸ¥"çš„é—®é¢˜
    - æ”¯æŒå…¨éƒ¨è®°å½•ã€ç­›é€‰ç»“æœã€æ‰¹é‡é€‰ä¸­ä¸‰ç§å¯¼å‡ºæ¨¡å¼
    - æ™ºèƒ½æ–‡ä»¶å‘½åï¼ˆè‡ªåŠ¨æ·»åŠ ç­›é€‰æ ‡è¯†ï¼‰
    - å®Œå–„çš„ä¸­æ–‡ç¼–ç æ”¯æŒï¼ˆBOMå¤´é˜²ä¹±ç ï¼‰
    - é¡¹ç›®ç±»å‹æ­£ç¡®æ˜ å°„ä¸ºä¸­æ–‡åç§°ï¼ˆComfyUIã€WebUIã€å¯¹è¯ç­‰ï¼‰
- **ä»¤ç‰Œç®¡ç†ç³»ç»Ÿä¼˜åŒ–**:
  - å®ç°è½¯åˆ é™¤æœºåˆ¶ï¼Œæ’¤é”€è€Œéåˆ é™¤ä»¤ç‰Œ
  - æ–°å¢`revoked`å­—æ®µè¿½è¸ªä»¤ç‰Œæ’¤é”€çŠ¶æ€
  - æ’¤é”€åä»¤ç‰Œç«‹å³å¤±æ•ˆï¼Œæ”¯æŒå®‰å…¨å®¡è®¡
  - ä¼˜åŒ–ä»¤ç‰Œåˆ—è¡¨åˆ†é¡µæ˜¾ç¤ºï¼ˆæ”¯æŒ50æ¡/é¡µï¼‰
  - æ–°å¢æ’¤é”€çŠ¶æ€ç­›é€‰åŠŸèƒ½
  - æ–°å¢ä¸€é”®æ¸…ç†å·²æ’¤é”€ä»¤ç‰ŒåŠŸèƒ½
- **æœ€åç™»å½•æ—¶é—´è¿½è¸ª**:
  - ç”¨æˆ·ç™»å½•æ—¶è‡ªåŠ¨æ›´æ–°`last_login`å­—æ®µ
  - ç®¡ç†å‘˜ç”¨æˆ·åˆ—è¡¨æ˜¾ç¤ºæœ€åç™»å½•æ—¶é—´
  - æ”¯æŒ"ä»æœªç™»å½•"çŠ¶æ€æ˜¾ç¤º
- **ç”¨æˆ·ç®¡ç†ä¼˜åŒ–**:
  - å»é™¤ç”¨æˆ·æŸ¥çœ‹åŠŸèƒ½ï¼Œç»Ÿä¸€ä½¿ç”¨ç¼–è¾‘åŠŸèƒ½
  - ç®¡ç†å‘˜ä¸å¯ç¦ç”¨è‡ªèº«è´¦æˆ·
  - ç¼–è¾‘åŠŸèƒ½æ”¯æŒæ‰€æœ‰ç”¨æˆ·å­—æ®µä¿®æ”¹
  - ç”¨æˆ·çŠ¶æ€åˆ‡æ¢åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

## æ•°æ®åº“ä¼˜åŒ–è¯´æ˜

### ğŸ¯ ä¼˜åŒ–æ¦‚è¿°
ä¸ºäº†æå‡ç³»ç»Ÿå®‰å…¨æ€§å’Œé˜²æ­¢ä¿¡æ¯æ³„éœ²ï¼Œæˆ‘ä»¬å¯¹æ•°æ®åº“è¿›è¡Œäº†å…¨é¢ä¼˜åŒ–ï¼Œå®ç°äº†å®Œå…¨éšæœºçš„IDç”Ÿæˆæœºåˆ¶ã€‚

### ğŸ”§ æŠ€æœ¯å®ç°

#### IDç”Ÿæˆç­–ç•¥
- **ç§»é™¤è‡ªå¢åºåˆ—**: æ‰€æœ‰æ ¸å¿ƒè¡¨å·²ç§»é™¤AUTO_INCREMENTå±æ€§
- **éšæœºIDç”Ÿæˆ**: ä½¿ç”¨`RandomIDGenerator`ç”Ÿæˆ1ä¸‡äº¿-9ä¸‡ä¸‡äº¿èŒƒå›´å†…çš„éšæœºID
- **ä¿æŒæ•°æ®ç±»å‹**: ç»§ç»­ä½¿ç”¨BIGINT UNSIGNEDï¼Œç¡®ä¿æ€§èƒ½å’Œå…¼å®¹æ€§
- **çº¿ç¨‹å®‰å…¨**: æ”¯æŒé«˜å¹¶å‘ç¯å¢ƒä¸‹çš„å”¯ä¸€æ€§ä¿è¯
- **Djangoé›†æˆ**: IDç”Ÿæˆå™¨å·²é›†æˆåˆ°`authentication.utils`æ¨¡å—ä¸­

#### ä¼˜åŒ–çš„è¡¨
| è¡¨å | è®°å½•æ•° | IDèŒƒå›´ç¤ºä¾‹ | ä¹±åºç¨‹åº¦ |
|------|--------|------------|----------|
| users | 19æ¡ | 1,286,071,206,912,771,874 - 8,833,444,280,517,369,888 | âœ… 53.85%é€’å¢æ¯”ä¾‹ |
| project_categories | 4æ¡ | 2,164,238,018,644,507,186 - 6,734,285,177,059,253,106 | âœ… è‰¯å¥½ä¹±åº |
| configs | 6æ¡ | 1,870,234,794,176,292,672 - 5,547,980,102,093,183,415 | âœ… è‰¯å¥½ä¹±åº |
| generations | 3æ¡ | 1,504,355,496,382,637,616 - 7,408,465,358,589,349,628 | âœ… 50%é€’å¢æ¯”ä¾‹ |
| tokens | 24æ¡ | 1,129,268,112,755,067,510 - 9,138,296,597,550,244,523 | âœ… 47.83%é€’å¢æ¯”ä¾‹ |
| point_usage_records | 10æ¡ | 1,120,103,148,240,669,411 - 8,769,556,661,988,852,545 | âœ… 55.56%é€’å¢æ¯”ä¾‹ |

### ğŸ”’ å®‰å…¨æ€§æå‡

#### é˜²æ­¢ä¿¡æ¯æ³„éœ²
- **ä¹‹å‰**: é€šè¿‡è¿ç»­IDå¯æ¨æµ‹ç”¨æˆ·æ•°é‡ã€æ³¨å†Œæ—¶é—´ç­‰æ•æ„Ÿä¿¡æ¯
- **ç°åœ¨**: IDå®Œå…¨éšæœºï¼Œæ— æ³•æ¨æµ‹ä»»ä½•ä¸šåŠ¡ä¿¡æ¯

#### é˜²æ­¢éå†æ”»å‡»
- **ä¹‹å‰**: æ”»å‡»è€…å¯é€šè¿‡é€’å¢IDéå†æ‰€æœ‰èµ„æº
- **ç°åœ¨**: éšæœºIDä½¿éå†æ”»å‡»å˜å¾—ä¸å¯è¡Œ

#### æé«˜ç³»ç»Ÿå®‰å…¨
- **ä¹‹å‰**: IDå¯é¢„æµ‹ï¼Œå­˜åœ¨å®‰å…¨éšæ‚£
- **ç°åœ¨**: IDä¸å¯é¢„æµ‹ï¼Œå¤§å¹…æå‡å®‰å…¨æ€§

### ğŸ“Š å…¼å®¹æ€§ä¿è¯

#### APIå…¼å®¹æ€§
- âœ… æ‰€æœ‰APIè·¯å¾„ä¿æŒä¸å˜ï¼ˆå¦‚`/api/admin/users/{id}/`ï¼‰
- âœ… åºåˆ—åŒ–å™¨æ­£å¸¸å·¥ä½œï¼ŒIDå­—æ®µæ­£ç¡®è¿”å›
- âœ… å¤–é”®æŸ¥è¯¢åŠŸèƒ½æ­£å¸¸
- âœ… åˆ†é¡µã€æ’åºã€ç­›é€‰åŠŸèƒ½ä¸å—å½±å“

#### å‰ç«¯å…¼å®¹æ€§
- âœ… IDä»ä¸ºæ•°å­—ç±»å‹ï¼Œå‰ç«¯æ— éœ€ä¿®æ”¹
- âœ… æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ä¿æŒä¸å˜
- âœ… ç”¨æˆ·ä½“éªŒå®Œå…¨ä¸€è‡´

#### æ•°æ®å®Œæ•´æ€§
- âœ… æ‰€æœ‰å¤–é”®å…³ç³»å®Œæ•´ä¿æŒ
- âœ… 66æ¡è®°å½•å®Œæ•´è¿ç§»ï¼Œé›¶æ•°æ®ä¸¢å¤±
- âœ… ç´¢å¼•å’ŒæŸ¥è¯¢æ€§èƒ½ä¸å—å½±å“

### ğŸ’¡ å¼€å‘è€…æ³¨æ„äº‹é¡¹

#### æ–°è®°å½•åˆ›å»º
```python
# åˆ›å»ºæ–°ç”¨æˆ·ï¼ˆIDè‡ªåŠ¨ç”Ÿæˆï¼‰
user = CustomUser(username="test", phone_number="123456789")
user.save()
print(f"æ–°ç”¨æˆ·ID: {user.id}")  # è¾“å‡ºéšæœºIDï¼Œå¦‚ï¼š4115361349489737397
```

#### IDç”Ÿæˆå™¨ä½¿ç”¨
```python
from authentication.utils import generate_id, generate_batch_ids

# æ‰‹åŠ¨ç”ŸæˆéšæœºID
new_id = generate_id()
print(f"éšæœºID: {new_id}")  # è¾“å‡ºå¦‚ï¼š6416157825986189457

# æ‰¹é‡ç”Ÿæˆä¹±åºID
ids = generate_batch_ids(10)
print(f"æ‰¹é‡ID: {ids}")
```

#### IDéªŒè¯å’Œåˆ†æå·¥å…·
```python
from authentication.utils import validate_id_format, analyze_id_randomness

# éªŒè¯IDæ ¼å¼
is_valid = validate_id_format(6416157825986189457)
print(f"IDæ ¼å¼æ­£ç¡®: {is_valid}")  # True

# åˆ†æIDéšæœºæ€§
id_list = [1234567890123456789, 9876543210987654321, 5555555555555555555]
analysis = analyze_id_randomness(id_list)
print(f"éšæœºæ€§ç­‰çº§: {analysis['randomness_level']}")  # ä¼˜ç§€/è‰¯å¥½/ä¸€èˆ¬/è¾ƒå·®/å·®
print(f"é€’å¢æ¯”ä¾‹: {analysis['increasing_ratio']:.2%}")  # å¦‚ï¼š45.67%
```

#### é‡è¦æé†’
- âš ï¸ **ä¸è¦ä¾èµ–IDçš„é¡ºåºæ€§**: IDä¸å†æŒ‰æ—¶é—´é€’å¢
- âš ï¸ **ä¸è¦ä½¿ç”¨IDæ¨æµ‹ä¸šåŠ¡ä¿¡æ¯**: IDå®Œå…¨éšæœºï¼Œæ— ä¸šåŠ¡å«ä¹‰
- âœ… **ç»§ç»­ä½¿ç”¨IDä½œä¸ºä¸»é”®**: æŸ¥è¯¢ã€å…³è”ç­‰åŠŸèƒ½å®Œå…¨æ­£å¸¸
- âœ… **APIä½¿ç”¨æ–¹å¼ä¸å˜**: æ‰€æœ‰æ¥å£è°ƒç”¨æ–¹å¼ä¿æŒä¸€è‡´

---

## è®¤è¯æ–¹å¼

### JWT Tokenè®¤è¯
æœ¬APIä½¿ç”¨JWT (JSON Web Token) è¿›è¡Œèº«ä»½è®¤è¯ï¼Œé‡‡ç”¨RSA256ç®—æ³•ç­¾åã€‚

#### Tokenç±»å‹
- **Access Token**: ç”¨äºAPIè®¿é—®ï¼Œæœ‰æ•ˆæœŸ30åˆ†é’Ÿ (1800ç§’)
- **Refresh Token**: ç”¨äºåˆ·æ–°Access Tokenï¼Œæœ‰æ•ˆæœŸ24å°æ—¶ (86400ç§’)

#### è®¤è¯å¤´æ ¼å¼
```
Authorization: Bearer <access_token>
```

#### ä»¤ç‰Œå®‰å…¨æœ€ä½³å®è·µ
1. **Access Token**: çŸ­æœŸæœ‰æ•ˆï¼Œç”¨äºAPIè®¿é—®
2. **Refresh Token**: é•¿æœŸæœ‰æ•ˆï¼Œä»…ç”¨äºåˆ·æ–°Access Token
3. **æ’¤é”€æœºåˆ¶**: æ”¯æŒä¸»åŠ¨æ’¤é”€å¯ç–‘æˆ–æ³„éœ²çš„ä»¤ç‰Œ
4. **è‡ªåŠ¨è¿‡æœŸ**: ä»¤ç‰Œåˆ°æœŸåè‡ªåŠ¨å¤±æ•ˆ
5. **å®¡è®¡æ—¥å¿—**: æ‰€æœ‰ä»¤ç‰Œæ“ä½œéƒ½æœ‰å®Œæ•´çš„å®¡è®¡è®°å½•

---

## é€šç”¨è§„èŒƒ

### è¯·æ±‚å¤´è§„èŒƒ
```http
Content-Type: application/json
Accept: application/json
Authorization: Bearer <access_token>  # éœ€è¦è®¤è¯çš„æ¥å£
```

### å“åº”æ ¼å¼
#### æˆåŠŸå“åº”
```json
{
    "message": "æ“ä½œæˆåŠŸ",
    "data": { ... },
    "timestamp": "2025-01-25T10:00:00Z"
}
```

#### é”™è¯¯å“åº”
```json
{
    "message": "é”™è¯¯æè¿°",
    "errors": { ... },
    "status_code": 400
}
```

### åˆ†é¡µæ ¼å¼
```json
{
    "count": 100,
    "next": "http://localhost:8000/api/auth/endpoint/?page=2",
    "previous": null,
    "results": [ ... ]
}
```

---

## ç”¨æˆ·è®¤è¯æ¥å£

### 1. ç”¨æˆ·æ³¨å†Œ

#### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/auth/register/`
- **æƒé™**: å…¬å¼€è®¿é—®
- **æè¿°**: åˆ›å»ºæ–°ç”¨æˆ·è´¦å·ï¼Œéœ€è¦çŸ­ä¿¡éªŒè¯ç éªŒè¯

#### æ³¨å†Œæµç¨‹
1. è°ƒç”¨ `/api/auth/sms/send/` å‘é€çŸ­ä¿¡éªŒè¯ç 
2. ç”¨æˆ·æ”¶åˆ°çŸ­ä¿¡éªŒè¯ç 
3. è°ƒç”¨ `/api/auth/register/` è¿›è¡Œæ³¨å†Œï¼ŒåŒ…å«éªŒè¯ç 

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/auth/register/
Content-Type: application/json

{
    "username": "testuser",
    "phone_number": "13800138000",
    "password": "password123",
    "password_confirm": "password123",
    "sms_code": "123456",
    "gender": "male",
    "job_title": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
    "introduction": "ä¸ªäººä»‹ç»",
    "avatar_url": "https://example.com/avatar.jpg"
}
```

#### å“åº”ç¤ºä¾‹
```json
{
    "message": "ç”¨æˆ·æ³¨å†ŒæˆåŠŸ",
    "user": {
        "id": 1,
        "username": "testuser",
        "phone_number": "13800138000",
        "gender": "male",
        "job_title": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
        "introduction": "ä¸ªäººä»‹ç»",
        "avatar_url": "https://example.com/avatar.jpg",
        "points": 1000,
        "system_role": "user",
        "created_at": "2025-01-25T10:00:00Z"
    },
    "tokens": {
        "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9...",
        "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9...",
        "access_expires_in": 3600,
        "refresh_expires_in": 604800
    }
}
```

### 2. ç”¨æˆ·ç™»å½•

#### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/auth/login/`
- **æƒé™**: å…¬å¼€è®¿é—®
- **æè¿°**: ç”¨æˆ·ç™»å½•è·å–Token

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/auth/login/
Content-Type: application/json

{
    "username": "testuser",
    "password": "password123"
}
```

#### å“åº”ç¤ºä¾‹
```json
{
    "message": "ç™»å½•æˆåŠŸ",
    "user": {
        "id": 1,
        "username": "testuser",
        "phone_number": "13800138000",
        "gender": "male",
        "job_title": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
        "introduction": "ä¸ªäººä»‹ç»",
        "avatar_url": "https://example.com/avatar.jpg",
        "points": 1000,
        "system_role": "user",
        "created_at": "2025-01-25T10:00:00Z",
        "last_login": "2025-01-25 14:30:45"
    },
    "tokens": {
        "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9...",
        "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9...",
        "access_expires_in": 3600,
        "refresh_expires_in": 604800
    }
}
```

### 3. Tokenåˆ·æ–°

#### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/auth/refresh/`
- **æƒé™**: å…¬å¼€è®¿é—®
- **æè¿°**: ä½¿ç”¨Refresh Tokenè·å–æ–°çš„Access Token

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/auth/refresh/
Content-Type: application/json

{
    "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9..."
}
```

#### å“åº”ç¤ºä¾‹

##### æˆåŠŸå“åº”
```json
{
    "message": "Tokenåˆ·æ–°æˆåŠŸ",
    "tokens": {
        "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9...",
        "access_expires_in": 1800
    }
}
```

##### å¤±è´¥å“åº”ï¼ˆä»¤ç‰Œå·²æ’¤é”€ï¼‰
```json
{
    "message": "Tokenåˆ·æ–°å¤±è´¥",
    "error": "Refresh tokenå·²è¢«æ’¤é”€"
}
```

##### å¤±è´¥å“åº”ï¼ˆä»¤ç‰Œè¿‡æœŸï¼‰
```json
{
    "message": "Tokenåˆ·æ–°å¤±è´¥",
    "error": "Refresh tokenå·²è¿‡æœŸ"
}
```

### 4. ç”¨æˆ·ç™»å‡º

#### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/auth/logout/`
- **æƒé™**: å·²è®¤è¯ç”¨æˆ·
- **æè¿°**: ç”¨æˆ·ç™»å‡ºï¼Œæ’¤é”€Token

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/auth/logout/
Authorization: Bearer <access_token>
```

#### å“åº”ç¤ºä¾‹
```json
{
    "message": "ç™»å‡ºæˆåŠŸ"
}
```

### 5. è·å–ç”¨æˆ·èµ„æ–™

#### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/auth/profile/`
- **æƒé™**: å·²è®¤è¯ç”¨æˆ·
- **æè¿°**: è·å–å½“å‰ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯

#### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/auth/profile/
Authorization: Bearer <access_token>
```

#### å“åº”ç¤ºä¾‹
```json
{
    "id": 1,
    "username": "testuser",
    "phone_number": "13800138000",
    "gender": "male",
    "job_title": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
    "introduction": "ä¸ªäººä»‹ç»",
    "avatar_url": "https://example.com/avatar.jpg",
    "points": 1000,
    "system_role": "user",
    "created_at": "2025-01-25T10:00:00Z",
    "updated_at": "2025-01-25T10:00:00Z"
}
```

### 6. æ›´æ–°ç”¨æˆ·èµ„æ–™

#### æ¥å£ä¿¡æ¯
- **URL**: `PUT /api/auth/profile/update/`
- **æƒé™**: å·²è®¤è¯ç”¨æˆ·
- **æè¿°**: æ›´æ–°å½“å‰ç”¨æˆ·çš„èµ„æ–™ä¿¡æ¯

#### è¯·æ±‚ç¤ºä¾‹
```http
PUT /api/auth/profile/update/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "job_title": "é«˜çº§è½¯ä»¶å·¥ç¨‹å¸ˆ",
    "introduction": "æ›´æ–°åçš„ä¸ªäººä»‹ç»",
    "avatar_url": "https://example.com/new-avatar.jpg"
}
```

#### å“åº”ç¤ºä¾‹
```json
{
    "message": "ç”¨æˆ·èµ„æ–™æ›´æ–°æˆåŠŸ",
    "user": {
        "id": 1,
        "username": "testuser",
        "phone_number": "13800138000",
        "gender": "male",
        "job_title": "é«˜çº§è½¯ä»¶å·¥ç¨‹å¸ˆ",
        "introduction": "æ›´æ–°åçš„ä¸ªäººä»‹ç»",
        "avatar_url": "https://example.com/new-avatar.jpg",
        "points": 1000,
        "system_role": "user",
        "created_at": "2025-01-25T10:00:00Z",
        "updated_at": "2025-01-25T10:30:00Z"
    }
}
```

### 7. ä¿®æ”¹å¯†ç 

#### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/auth/password/change/`
- **æƒé™**: å·²è®¤è¯ç”¨æˆ·
- **æè¿°**: ä¿®æ”¹ç”¨æˆ·å¯†ç 

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/auth/password/change/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "old_password": "oldpassword123",
    "new_password": "newpassword123",
    "new_password_confirm": "newpassword123"
}
```

#### å“åº”ç¤ºä¾‹
```json
{
    "message": "å¯†ç ä¿®æ”¹æˆåŠŸ"
}
```

#### é”™è¯¯å“åº”ç¤ºä¾‹
```json
{
    "message": "å¯†ç ä¿®æ”¹å¤±è´¥",
    "errors": {
        "old_password": ["æ—§å¯†ç é”™è¯¯"]
    }
}
```

**æ³¨æ„**: å¯†ç ä¿®æ”¹åŠŸèƒ½å·²é€šè¿‡ä¸“é—¨æµ‹è¯•éªŒè¯ï¼Œå®Œå…¨æ­£å¸¸å·¥ä½œã€‚å¦‚æœåœ¨ç»¼åˆæµ‹è¯•ä¸­é‡åˆ°è¶…æ—¶é—®é¢˜ï¼Œè¯·ä½¿ç”¨å•ç‹¬çš„æµ‹è¯•è„šæœ¬éªŒè¯ã€‚

### 8. å‘é€çŸ­ä¿¡éªŒè¯ç 

#### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/auth/sms/send/`
- **æƒé™**: å…¬å¼€è®¿é—®
- **æè¿°**: å‘é€çŸ­ä¿¡éªŒè¯ç åˆ°æŒ‡å®šæ‰‹æœºå·

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/auth/sms/send/
Content-Type: application/json

{
    "phone_number": "19301366078"
}
```

#### å“åº”ç¤ºä¾‹

##### æˆåŠŸå“åº”
```json
{
    "message": "éªŒè¯ç å‘é€æˆåŠŸ",
    "request_id": "96CB86E3-BFF7-5204-B99F-54EB5C988115"
}
```

##### å¤±è´¥å“åº”ï¼ˆå‘é€é¢‘ç‡é™åˆ¶ï¼‰
```json
{
    "message": "å‘é€è¿‡äºé¢‘ç¹ï¼Œè¯·1åˆ†é’Ÿåå†è¯•"
}
```

##### å¤±è´¥å“åº”ï¼ˆæ‰‹æœºå·æ ¼å¼é”™è¯¯ï¼‰
```json
{
    "message": "å‚æ•°éªŒè¯å¤±è´¥",
    "errors": {
        "phone_number": ["æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®"]
    }
}
```

#### åŠŸèƒ½ç‰¹æ€§
- **é¢‘ç‡é™åˆ¶**: åŒä¸€æ‰‹æœºå·1åˆ†é’Ÿå†…åªèƒ½å‘é€ä¸€æ¬¡éªŒè¯ç 
- **éªŒè¯ç æœ‰æ•ˆæœŸ**: 5åˆ†é’Ÿ
- **éªŒè¯ç æ ¼å¼**: 6ä½æ•°å­—
- **çŸ­ä¿¡æœåŠ¡**: ä½¿ç”¨é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡
- **çŸ­ä¿¡ç­¾å**: å­‘è¡Œ
- **çŸ­ä¿¡æ¨¡æ¿**: SMS_324431014

### 9. éªŒè¯çŸ­ä¿¡éªŒè¯ç 

#### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/auth/sms/verify/`
- **æƒé™**: å…¬å¼€è®¿é—®
- **æè¿°**: éªŒè¯çŸ­ä¿¡éªŒè¯ç æ˜¯å¦æ­£ç¡®

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/auth/sms/verify/
Content-Type: application/json

{
    "phone_number": "19301366078",
    "code": "123456"
}
```

#### å“åº”ç¤ºä¾‹

##### æˆåŠŸå“åº”
```json
{
    "message": "éªŒè¯ç éªŒè¯æˆåŠŸ"
}
```

##### å¤±è´¥å“åº”ï¼ˆéªŒè¯ç é”™è¯¯ï¼‰
```json
{
    "message": "éªŒè¯ç ä¸å­˜åœ¨æˆ–å·²ä½¿ç”¨"
}
```

##### å¤±è´¥å“åº”ï¼ˆéªŒè¯ç è¿‡æœŸï¼‰
```json
{
    "message": "éªŒè¯ç å·²è¿‡æœŸ"
}
```

##### å¤±è´¥å“åº”ï¼ˆå°è¯•æ¬¡æ•°è¿‡å¤šï¼‰
```json
{
    "message": "éªŒè¯ç å°è¯•æ¬¡æ•°è¿‡å¤š"
}
```

#### éªŒè¯è§„åˆ™
- **éªŒè¯ç æ ¼å¼**: å¿…é¡»æ˜¯6ä½æ•°å­—
- **æœ‰æ•ˆæœŸ**: 5åˆ†é’Ÿå†…æœ‰æ•ˆ
- **å°è¯•æ¬¡æ•°**: æœ€å¤šå°è¯•3æ¬¡
- **ä½¿ç”¨æ¬¡æ•°**: éªŒè¯æˆåŠŸåç«‹å³å¤±æ•ˆ
- **è‡ªåŠ¨æ¸…ç†**: éªŒè¯æˆåŠŸåä¼šæ¸…ç†è¯¥æ‰‹æœºå·çš„å…¶ä»–æœªä½¿ç”¨éªŒè¯ç 

### 10. å¿˜è®°å¯†ç  - å‘é€éªŒè¯ç 

#### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/auth/forgot-password/`
- **æƒé™**: å…¬å¼€è®¿é—®
- **æè¿°**: ä¸ºå¿˜è®°å¯†ç çš„ç”¨æˆ·å‘é€çŸ­ä¿¡éªŒè¯ç 

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/auth/forgot-password/
Content-Type: application/json

{
    "phone_number": "13800138002"
}
```

#### å“åº”ç¤ºä¾‹

##### æˆåŠŸå“åº”
```json
{
    "message": "éªŒè¯ç å‘é€æˆåŠŸï¼Œè¯·æŸ¥çœ‹æ‰‹æœºçŸ­ä¿¡",
    "request_id": "F23B9BEF-F808-5E15-B7EA-0214FBCCF878"
}
```

##### å¤±è´¥å“åº”ï¼ˆæ‰‹æœºå·æœªæ³¨å†Œï¼‰
```json
{
    "message": "å‚æ•°éªŒè¯å¤±è´¥",
    "errors": {
        "phone_number": ["è¯¥æ‰‹æœºå·æœªæ³¨å†Œ"]
    }
}
```

##### å¤±è´¥å“åº”ï¼ˆå‘é€é¢‘ç‡é™åˆ¶ï¼‰
```json
{
    "message": "å‘é€è¿‡äºé¢‘ç¹ï¼Œè¯·1åˆ†é’Ÿåå†è¯•"
}
```

#### åŠŸèƒ½ç‰¹æ€§
- **ç”¨æˆ·éªŒè¯**: åªæœ‰å·²æ³¨å†Œçš„æ‰‹æœºå·æ‰èƒ½æ¥æ”¶éªŒè¯ç 
- **é¢‘ç‡é™åˆ¶**: åŒä¸€æ‰‹æœºå·1åˆ†é’Ÿå†…åªèƒ½å‘é€ä¸€æ¬¡éªŒè¯ç 
- **éªŒè¯ç æœ‰æ•ˆæœŸ**: 5åˆ†é’Ÿ
- **å®‰å…¨æœºåˆ¶**: ä¸æ³¨å†ŒéªŒè¯ç ä½¿ç”¨ç›¸åŒçš„å®‰å…¨ç­–ç•¥

### 11. é‡ç½®å¯†ç 

#### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/auth/reset-password/`
- **æƒé™**: å…¬å¼€è®¿é—®
- **æè¿°**: ä½¿ç”¨çŸ­ä¿¡éªŒè¯ç é‡ç½®ç”¨æˆ·å¯†ç 

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/auth/reset-password/
Content-Type: application/json

{
    "phone_number": "13800138002",
    "sms_code": "123456",
    "new_password": "newpassword123",
    "confirm_password": "newpassword123"
}
```

#### å“åº”ç¤ºä¾‹

##### æˆåŠŸå“åº”
```json
{
    "message": "å¯†ç é‡ç½®æˆåŠŸï¼Œè¯·ä½¿ç”¨æ–°å¯†ç ç™»å½•"
}
```

##### å¤±è´¥å“åº”ï¼ˆéªŒè¯ç é”™è¯¯ï¼‰
```json
{
    "message": "å‚æ•°éªŒè¯å¤±è´¥",
    "errors": {
        "non_field_errors": ["çŸ­ä¿¡éªŒè¯ç éªŒè¯å¤±è´¥: éªŒè¯ç ä¸å­˜åœ¨æˆ–å·²ä½¿ç”¨"]
    }
}
```

##### å¤±è´¥å“åº”ï¼ˆå¯†ç ä¸ä¸€è‡´ï¼‰
```json
{
    "message": "å‚æ•°éªŒè¯å¤±è´¥",
    "errors": {
        "non_field_errors": ["ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"]
    }
}
```

#### é‡ç½®æµç¨‹
1. è°ƒç”¨ `/api/auth/forgot-password/` å‘é€éªŒè¯ç 
2. ç”¨æˆ·æ”¶åˆ°çŸ­ä¿¡éªŒè¯ç 
3. è°ƒç”¨ `/api/auth/reset-password/` é‡ç½®å¯†ç 
4. ä½¿ç”¨æ–°å¯†ç ç™»å½•ç³»ç»Ÿ

#### å®‰å…¨æœºåˆ¶
- **éªŒè¯ç éªŒè¯**: å¿…é¡»æä¾›æœ‰æ•ˆçš„çŸ­ä¿¡éªŒè¯ç 
- **å¯†ç å¼ºåº¦**: æ–°å¯†ç æœ€å°‘6ä½å­—ç¬¦
- **ä¸€æ¬¡æ€§ä½¿ç”¨**: éªŒè¯ç ä½¿ç”¨åç«‹å³å¤±æ•ˆ
- **ç”¨æˆ·éªŒè¯**: åªèƒ½é‡ç½®å·²æ³¨å†Œç”¨æˆ·çš„å¯†ç 

---

## é¡¹ç›®åˆ†ç±»æ¥å£

### 1. è·å–é¡¹ç›®åˆ†ç±»åˆ—è¡¨

#### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/auth/project-categories/`
- **æƒé™**: å…¬å¼€è®¿é—®
- **æè¿°**: è·å–æ‰€æœ‰é¡¹ç›®åˆ†ç±»åˆ—è¡¨ï¼Œæ”¯æŒæœç´¢ã€è¿‡æ»¤ã€æ’åº

#### æŸ¥è¯¢å‚æ•°
- `is_active`: æ˜¯å¦å¯ç”¨ (true/false)
- `search`: æœç´¢å…³é”®è¯ï¼ˆåŒ¹é…åç§°å’Œæè¿°ï¼‰
- `ordering`: æ’åºå­—æ®µ (created_at, name, -created_at, -name)
- `page`: é¡µç 
- `page_size`: æ¯é¡µæ•°é‡

#### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/auth/project-categories/?is_active=true&search=ComfyUI&ordering=-created_at
```

#### å“åº”ç¤ºä¾‹
```json
{
    "count": 4,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": 1,
            "name": "ComfyUI",
            "code": "comfyui",
            "description": "ComfyUIå·¥ä½œæµç”Ÿå›¾",
            "is_active": true,
            "created_at": "2025-01-25T10:00:00Z",
            "updated_at": "2025-01-25T10:00:00Z"
        },
        {
            "id": 2,
            "name": "WebUI",
            "code": "webui",
            "description": "Stable Diffusion WebUIç”Ÿå›¾",
            "is_active": true,
            "created_at": "2025-01-25T10:00:00Z",
            "updated_at": "2025-01-25T10:00:00Z"
        }
    ]
}
```

### 2. è·å–å•ä¸ªé¡¹ç›®åˆ†ç±»

#### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/auth/project-categories/{id}/`
- **æƒé™**: å…¬å¼€è®¿é—®
- **æè¿°**: è·å–æŒ‡å®šIDçš„é¡¹ç›®åˆ†ç±»è¯¦æƒ…

#### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/auth/project-categories/1/
```

#### å“åº”ç¤ºä¾‹
```json
{
    "id": 1,
    "name": "ComfyUI",
    "code": "comfyui",
    "description": "ComfyUIå·¥ä½œæµç”Ÿå›¾",
    "is_active": true,
    "created_at": "2025-01-25T10:00:00Z",
    "updated_at": "2025-01-25T10:00:00Z"
}
```

### 3. åˆ›å»ºé¡¹ç›®åˆ†ç±»

#### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/auth/project-categories/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: åˆ›å»ºæ–°çš„é¡¹ç›®åˆ†ç±»

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/auth/project-categories/
Authorization: Bearer <admin_access_token>
Content-Type: application/json

{
    "name": "æ–°é¡¹ç›®ç±»å‹",
    "code": "new_project",
    "description": "æ–°çš„é¡¹ç›®åˆ†ç±»æè¿°",
    "is_active": true
}
```

#### å“åº”ç¤ºä¾‹
```json
{
    "id": 5,
    "name": "æ–°é¡¹ç›®ç±»å‹",
    "code": "new_project",
    "description": "æ–°çš„é¡¹ç›®åˆ†ç±»æè¿°",
    "is_active": true,
    "created_at": "2025-01-25T10:30:00Z",
    "updated_at": "2025-01-25T10:30:00Z"
}
```

### 4. æ›´æ–°é¡¹ç›®åˆ†ç±»

#### æ¥å£ä¿¡æ¯
- **URL**: `PUT /api/auth/project-categories/{id}/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: æ›´æ–°æŒ‡å®šé¡¹ç›®åˆ†ç±»çš„ä¿¡æ¯

#### è¯·æ±‚ç¤ºä¾‹
```http
PUT /api/auth/project-categories/1/
Authorization: Bearer <admin_access_token>
Content-Type: application/json

{
    "name": "ComfyUIå·¥ä½œæµ",
    "code": "comfyui",
    "description": "ComfyUIå·¥ä½œæµç”Ÿå›¾ç³»ç»Ÿ",
    "is_active": true
}
```

#### å“åº”ç¤ºä¾‹
```json
{
    "id": 1,
    "name": "ComfyUIå·¥ä½œæµ",
    "code": "comfyui",
    "description": "ComfyUIå·¥ä½œæµç”Ÿå›¾ç³»ç»Ÿ",
    "is_active": true,
    "created_at": "2025-01-25T10:00:00Z",
    "updated_at": "2025-01-25T10:35:00Z"
}
```

### 5. åˆ é™¤é¡¹ç›®åˆ†ç±»

#### æ¥å£ä¿¡æ¯
- **URL**: `DELETE /api/auth/project-categories/{id}/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: åˆ é™¤æŒ‡å®šçš„é¡¹ç›®åˆ†ç±»ï¼ˆæœ‰ç§¯åˆ†è®°å½•æ—¶ç¦æ­¢åˆ é™¤ï¼‰

#### è¯·æ±‚ç¤ºä¾‹
```http
DELETE /api/auth/project-categories/5/
Authorization: Bearer <admin_access_token>
```

#### å“åº”ç¤ºä¾‹
```json
{
    "message": "é¡¹ç›®åˆ†ç±»åˆ é™¤æˆåŠŸ"
}
```

#### é”™è¯¯å“åº”ç¤ºä¾‹
```json
{
    "message": "è¯¥é¡¹ç›®åˆ†ç±»ä¸‹å­˜åœ¨ç§¯åˆ†ä½¿ç”¨è®°å½•ï¼Œæ— æ³•åˆ é™¤"
}
```

---

## ç§¯åˆ†ä½¿ç”¨è®°å½•æ¥å£

### 1. æŸ¥è¯¢ç§¯åˆ†ä½¿ç”¨è®°å½•

#### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/auth/point-usage-records/`
- **æƒé™**: å·²è®¤è¯ç”¨æˆ·
- **æè¿°**: æŸ¥è¯¢ç§¯åˆ†ä½¿ç”¨è®°å½•ï¼Œæ™®é€šç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„è®°å½•ï¼Œç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰è®°å½•

#### æŸ¥è¯¢å‚æ•°
- `project_category`: é¡¹ç›®åˆ†ç±»ID
- `project_category__code`: é¡¹ç›®åˆ†ç±»ä»£ç 
- `start_date`: å¼€å§‹æ—¥æœŸ (YYYY-MM-DD)
- `end_date`: ç»“æŸæ—¥æœŸ (YYYY-MM-DD)
- `user_id`: ç”¨æˆ·IDï¼ˆä»…ç®¡ç†å‘˜ï¼‰
- `username`: ç”¨æˆ·åï¼ˆä»…ç®¡ç†å‘˜ï¼Œæ¨¡ç³ŠåŒ¹é…ï¼‰
- `ordering`: æ’åºå­—æ®µ (usage_time, points_used, -usage_time, -points_used)
- `page`: é¡µç 
- `page_size`: æ¯é¡µæ•°é‡

#### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/auth/point-usage-records/?project_category=1&start_date=2025-01-01&end_date=2025-01-31
Authorization: Bearer <access_token>
```

#### å“åº”ç¤ºä¾‹
```json
{
    "count": 10,
    "next": "http://localhost:8000/api/auth/point-usage-records/?page=2",
    "previous": null,
    "results": [
        {
            "id": 1,
            "user": 1,
            "user_username": "testuser",
            "project_category": 1,
            "project_category_name": "ComfyUI",
            "project_category_code": "comfyui",
            "usage_item_id": 123,
            "points_before": 1000,
            "points_after": 950,
            "points_used": 50,
            "usage_time": "2025-01-25T10:00:00Z",
            "description": "ComfyUIå·¥ä½œæµç”Ÿå›¾"
        }
    ],
    "stats": {
        "total_records": 10,
        "total_points_used": 500
    }
}
```

### 2. åˆ›å»ºç§¯åˆ†ä½¿ç”¨è®°å½•

#### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/auth/point-usage-records/create/`
- **æƒé™**: å·²è®¤è¯ç”¨æˆ·
- **æè¿°**: åˆ›å»ºç§¯åˆ†ä½¿ç”¨è®°å½•ï¼Œè‡ªåŠ¨æ‰£é™¤ç”¨æˆ·ç§¯åˆ†

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/auth/point-usage-records/create/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "project_category": 1,
    "usage_item_id": 456,
    "points_used": 30,
    "description": "ä½¿ç”¨ComfyUIç”Ÿæˆå›¾ç‰‡"
}
```

#### å“åº”ç¤ºä¾‹
```json
{
    "message": "ç§¯åˆ†ä½¿ç”¨è®°å½•åˆ›å»ºæˆåŠŸ",
    "record": {
        "id": 15,
        "user": 1,
        "user_username": "testuser",
        "project_category": 1,
        "project_category_name": "ComfyUI",
        "project_category_code": "comfyui",
        "usage_item_id": 456,
        "points_before": 950,
        "points_after": 920,
        "points_used": 30,
        "usage_time": "2025-01-25T10:45:00Z",
        "description": "ä½¿ç”¨ComfyUIç”Ÿæˆå›¾ç‰‡"
    }
}
```

#### é”™è¯¯å“åº”ç¤ºä¾‹
```json
{
    "message": "ç§¯åˆ†ä¸è¶³ï¼Œå½“å‰ç§¯åˆ†: 20ï¼Œéœ€è¦: 30"
}
```

---

## ç®¡ç†åå°æ¥å£

### 1. ä»ªè¡¨ç›˜ç»Ÿè®¡æ¥å£

#### 1.1 è·å–ä»ªè¡¨ç›˜ç»Ÿè®¡æ•°æ®

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/dashboard/stats/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–ä»ªè¡¨ç›˜ç»Ÿè®¡æ•°æ®

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/dashboard/stats/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "total_users": 13,
    "active_users": 0,
    "comfyui_generations": 9,
    "webui_generations": 1,
    "total_points_used": 250,
    "today_new_users": 1,
    "online_users": 3
}
```

#### 1.2 è·å–ç”¨æˆ·å¢é•¿å›¾è¡¨æ•°æ®

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/dashboard/charts/user-growth/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–ç”¨æˆ·å¢é•¿è¶‹åŠ¿æ•°æ®

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/dashboard/charts/user-growth/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "labels": ["1æœˆ", "2æœˆ", "3æœˆ", "4æœˆ", "5æœˆ", "6æœˆ"],
    "new_users": [12, 19, 8, 15, 22, 18],
    "active_users": [8, 15, 12, 18, 20, 16]
}
```

#### 1.3 è·å–ç§¯åˆ†åˆ†å¸ƒå›¾è¡¨æ•°æ®

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/dashboard/charts/points-distribution/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–ç§¯åˆ†åˆ†å¸ƒå›¾è¡¨æ•°æ®

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/dashboard/charts/points-distribution/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "labels": ["0-100ç§¯åˆ†", "100-500ç§¯åˆ†", "500-1000ç§¯åˆ†", "1000+ç§¯åˆ†"],
    "values": [25, 35, 25, 15]
}
```

#### 1.4 è·å–æœ€è¿‘æ´»åŠ¨åˆ—è¡¨

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/dashboard/recent-activities/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–æœ€è¿‘æ´»åŠ¨åˆ—è¡¨

##### æŸ¥è¯¢å‚æ•°
- `limit`: è¿”å›è®°å½•æ•°é‡ï¼Œé»˜è®¤15

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/dashboard/recent-activities/?limit=10
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
[
    {
        "type": "user_register",
        "description": "æ–°ç”¨æˆ· testuser_1754271607 æ³¨å†Œ",
        "user": "testuser_1754271607",
        "created_at": "2025-08-04T09:40:07Z"
    },
    {
        "type": "point_usage",
        "description": "ç”¨æˆ· alice ä½¿ç”¨äº† 10 ç§¯åˆ†",
        "user": "alice",
        "created_at": "2025-08-04T09:40:26Z"
    }
]
```

### 2. ç”¨æˆ·ç®¡ç†æ¥å£

#### 2.1 è·å–ç”¨æˆ·åˆ—è¡¨

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/users/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–ç”¨æˆ·ç®¡ç†åˆ—è¡¨ï¼Œæ”¯æŒæœç´¢ã€ç­›é€‰ã€åˆ†é¡µ

##### åŠŸèƒ½ç‰¹æ€§
- **æœ€åç™»å½•æ—¶é—´è¿½è¸ª**: ç³»ç»Ÿä¼šè‡ªåŠ¨è®°å½•ç”¨æˆ·æ¯æ¬¡ç™»å½•çš„æ—¶é—´ï¼Œæ˜¾ç¤ºåœ¨`last_login`å­—æ®µä¸­
- **ç™»å½•çŠ¶æ€æ˜¾ç¤º**: å¦‚æœç”¨æˆ·ä»æœªç™»å½•ï¼Œ`last_login`å­—æ®µä¸º`null`
- **å®æ—¶æ›´æ–°**: æ¯æ¬¡ç”¨æˆ·ç™»å½•æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ›´æ–°`last_login`æ—¶é—´æˆ³
- **ç”¨æˆ·çŠ¶æ€ç®¡ç†**: æ”¯æŒæ´»è·ƒ/éæ´»è·ƒçŠ¶æ€åˆ‡æ¢ï¼Œç®¡ç†å‘˜å¯ä»¥ç¦ç”¨/å¯ç”¨ç”¨æˆ·è´¦æˆ·

##### æŸ¥è¯¢å‚æ•°
- `search`: æœç´¢å…³é”®è¯ï¼ˆç”¨æˆ·åæˆ–ç”µè¯å·ç ï¼‰
- `role`: ç”¨æˆ·è§’è‰²ç­›é€‰ (admin, user)
- `gender`: æ€§åˆ«ç­›é€‰ (male, female, other)
- `is_active`: çŠ¶æ€ç­›é€‰ (true, false)
- `created_after`: æ³¨å†Œæ—¶é—´èµ·å§‹ (YYYY-MM-DD)
- `created_before`: æ³¨å†Œæ—¶é—´ç»“æŸ (YYYY-MM-DD)
- `page`: é¡µç 
- `page_size`: æ¯é¡µæ•°é‡

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/users/?search=alice&role=user&page=1&page_size=20
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "count": 13,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": 1,
            "username": "admin",
            "phone_number": "13800138000",
            "avatar_url": "https://example.com/avatar.jpg",
            "points": 1000,
            "gender": "other",
            "job_title": "ç³»ç»Ÿç®¡ç†å‘˜",
            "introduction": "ç³»ç»Ÿç®¡ç†å‘˜è´¦å·",
            "system_role": "admin",
            "following_count": 0,
            "followers_count": 0,
            "is_active": true,
            "created_at": "2025-07-25T10:35:44Z",
            "updated_at": "2025-07-25T10:35:44Z",
            "last_login": "2025-08-04T09:39:45Z"
        }
    ]
}
```

#### 2.2 ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯

##### æ¥å£ä¿¡æ¯
- **URL**: `PUT /api/admin/users/{id}/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯ï¼Œæ”¯æŒä¿®æ”¹æ‰€æœ‰ç”¨æˆ·å­—æ®µåŒ…æ‹¬çŠ¶æ€

##### åŠŸèƒ½ç‰¹æ€§
- **å®Œæ•´å­—æ®µç¼–è¾‘**: æ”¯æŒä¿®æ”¹ç”¨æˆ·åã€æ‰‹æœºå·ã€æ€§åˆ«ã€èŒä½ã€å¤´åƒURLã€ä¸ªäººä»‹ç»
- **ç³»ç»Ÿä¿¡æ¯ç¼–è¾‘**: æ”¯æŒä¿®æ”¹ç³»ç»Ÿè§’è‰²ã€ç§¯åˆ†ã€ç”¨æˆ·çŠ¶æ€
- **çŠ¶æ€åˆ‡æ¢**: æ”¯æŒæ´»è·ƒ/éæ´»è·ƒçŠ¶æ€åˆ‡æ¢
- **æ•°æ®éªŒè¯**: è‡ªåŠ¨éªŒè¯å­—æ®µæ ¼å¼å’Œå”¯ä¸€æ€§
- **å®æ—¶æ›´æ–°**: ä¿®æ”¹åæ•°æ®ç«‹å³æ›´æ–°åˆ°åˆ—è¡¨ä¸­

##### è¯·æ±‚ç¤ºä¾‹
```http
PUT /api/admin/users/123/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "username": "updated_user",
    "phone_number": "13900139000",
    "gender": "female",
    "job_title": "é«˜çº§å·¥ç¨‹å¸ˆ",
    "avatar_url": "https://example.com/new-avatar.jpg",
    "introduction": "æ›´æ–°åçš„ä¸ªäººä»‹ç»",
    "system_role": "user",
    "points": 1500,
    "is_active": false
}
```

##### å“åº”ç¤ºä¾‹
```json
{
    "message": "ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸ",
    "user": {
        "id": 123,
        "username": "updated_user",
        "phone_number": "13900139000",
        "gender": "female",
        "job_title": "é«˜çº§å·¥ç¨‹å¸ˆ",
        "avatar_url": "https://example.com/new-avatar.jpg",
        "introduction": "æ›´æ–°åçš„ä¸ªäººä»‹ç»",
        "system_role": "user",
        "points": 1500,
        "is_active": false,
        "updated_at": "2025-08-06T10:30:00Z"
    }
}
```

##### é”™è¯¯å“åº”ç¤ºä¾‹
```json
{
    "message": "ç”¨æˆ·ä¿¡æ¯æ›´æ–°å¤±è´¥",
    "errors": {
        "username": ["è¯¥ç”¨æˆ·åå·²å­˜åœ¨"],
        "phone_number": ["æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®"]
    }
}
```

### 3. ä»¤ç‰Œç®¡ç†æ¥å£

#### ä»¤ç‰Œæ’¤é”€æœºåˆ¶è¯´æ˜

æœ¬ç³»ç»Ÿé‡‡ç”¨**è½¯åˆ é™¤**æœºåˆ¶ç®¡ç†JWTä»¤ç‰Œï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

##### æ’¤é”€çŠ¶æ€å­—æ®µ
- `revoked`: å¸ƒå°”å€¼ï¼Œæ ‡è¯†ä»¤ç‰Œæ˜¯å¦å·²è¢«æ’¤é”€
  - `false` (0): ä»¤ç‰Œæœ‰æ•ˆï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨
  - `true` (1): ä»¤ç‰Œå·²æ’¤é”€ï¼Œæ— æ³•ç»§ç»­ä½¿ç”¨

##### æ’¤é”€æœºåˆ¶ä¼˜åŠ¿
1. **å®‰å…¨æ€§**: æ’¤é”€åä»¤ç‰Œç«‹å³å¤±æ•ˆï¼Œé˜²æ­¢æœªæˆæƒè®¿é—®
2. **å®¡è®¡è¿½è¸ª**: ä¿ç•™ä»¤ç‰Œå†å²è®°å½•ï¼Œä¾¿äºå®‰å…¨å®¡è®¡
3. **æ•°æ®å®Œæ•´æ€§**: ä¸ç ´åå…³è”æ•°æ®çš„å®Œæ•´æ€§
4. **å¯è¿½æº¯æ€§**: å¯ä»¥æŸ¥è¯¢ä»¤ç‰Œçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ

##### æ’¤é”€è§¦å‘åœºæ™¯
- ç®¡ç†å‘˜ä¸»åŠ¨æ’¤é”€å¯ç–‘ä»¤ç‰Œ
- ç”¨æˆ·ä¸»åŠ¨ç™»å‡ºï¼ˆæ’¤é”€refresh tokenï¼‰
- æ£€æµ‹åˆ°å¼‚å¸¸è®¿é—®è¡Œä¸º
- æ‰¹é‡æ¸…ç†è¿‡æœŸæˆ–æ— æ•ˆä»¤ç‰Œ

#### 3.1 è·å–ä»¤ç‰Œåˆ—è¡¨

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/tokens/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–ä»¤ç‰Œåˆ—è¡¨ï¼Œæ”¯æŒæŒ‰ç”¨æˆ·ã€ç±»å‹ã€çŠ¶æ€ç­›é€‰

##### æŸ¥è¯¢å‚æ•°
- `user_id`: ç”¨æˆ·IDç­›é€‰
- `user`: ç”¨æˆ·åç­›é€‰ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰
- `token_type`: ä»¤ç‰Œç±»å‹ (access, refresh)
- `revoked`: æ’¤é”€çŠ¶æ€ç­›é€‰ (true=å·²æ’¤é”€, false=æœ‰æ•ˆ)
- `expires_before`: è¿‡æœŸæ—¶é—´ç»“æŸ (YYYY-MM-DD)
- `expires_after`: è¿‡æœŸæ—¶é—´èµ·å§‹ (YYYY-MM-DD)
- `page`: é¡µç 
- `page_size`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼Œæœ€å¤§100ï¼‰

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/tokens/?token_type=refresh&user=alice&page=1
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "count": 16,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": 1,
            "user": {
                "id": 1,
                "username": "admin",
                "phone_number": "13800138000"
            },
            "username": "admin",
            "token_type": "refresh",
            "expires_at": "2025-08-05T09:39:45Z",
            "created_at": "2025-08-04T09:39:45Z",
            "revoked": false,
            "is_expired": false
        }
    ]
}
```

#### 3.2 æ’¤é”€å•ä¸ªä»¤ç‰Œ

##### æ¥å£ä¿¡æ¯
- **URL**: `DELETE /api/admin/tokens/{id}/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: æ’¤é”€æŒ‡å®šä»¤ç‰Œï¼ˆè½¯åˆ é™¤ï¼Œæ ‡è®°ä¸ºå·²æ’¤é”€çŠ¶æ€ï¼‰

##### åŠŸèƒ½è¯´æ˜
- **æ’¤é”€æœºåˆ¶**: ä»¤ç‰Œä¸ä¼šè¢«ç‰©ç†åˆ é™¤ï¼Œè€Œæ˜¯æ ‡è®°ä¸ºå·²æ’¤é”€çŠ¶æ€ (`revoked=true`)
- **ç«‹å³ç”Ÿæ•ˆ**: æ’¤é”€åä»¤ç‰Œç«‹å³å¤±æ•ˆï¼Œæ— æ³•ç»§ç»­ä½¿ç”¨
- **å®¡è®¡è¿½è¸ª**: ä¿ç•™ä»¤ç‰Œè®°å½•ç”¨äºå®‰å…¨å®¡è®¡
- **ä¸å¯é€†æ“ä½œ**: å·²æ’¤é”€çš„ä»¤ç‰Œæ— æ³•æ¢å¤

##### è¯·æ±‚ç¤ºä¾‹
```http
DELETE /api/admin/tokens/123/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "message": "ä»¤ç‰Œå·²æ’¤é”€"
}
```

#### 3.3 æ‰¹é‡æ’¤é”€ä»¤ç‰Œ

##### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/admin/tokens/batch-delete/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: æ‰¹é‡æ’¤é”€ä»¤ç‰Œï¼ˆè½¯åˆ é™¤ï¼Œæ ‡è®°ä¸ºå·²æ’¤é”€çŠ¶æ€ï¼‰

##### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/admin/tokens/batch-delete/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "token_ids": [1, 2, 3, 4]
}
```

##### å“åº”ç¤ºä¾‹
```json
{
    "message": "æ‰¹é‡æ’¤é”€æˆåŠŸ",
    "revoked_count": 4
}
```

#### 3.4 æ¸…ç†è¿‡æœŸä»¤ç‰Œ

##### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/admin/tokens/cleanup-expired/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: æ¸…ç†æ‰€æœ‰è¿‡æœŸä»¤ç‰Œ

##### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/admin/tokens/cleanup-expired/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "message": "è¿‡æœŸä»¤ç‰Œæ¸…ç†å®Œæˆ",
    "deleted_count": 15
}
```

#### 3.5 æ¸…ç†å·²æ’¤é”€ä»¤ç‰Œ

##### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/admin/tokens/cleanup-revoked/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: ç‰©ç†åˆ é™¤æ‰€æœ‰å·²æ’¤é”€çš„ä»¤ç‰Œè®°å½•

##### åŠŸèƒ½è¯´æ˜
- **ç‰©ç†åˆ é™¤**: ä¸æ’¤é”€æ“ä½œä¸åŒï¼Œæ­¤æ“ä½œä¼šæ°¸ä¹…åˆ é™¤ä»¤ç‰Œè®°å½•
- **æ‰¹é‡æ¸…ç†**: ä¸€æ¬¡æ€§åˆ é™¤æ‰€æœ‰ `revoked=true` çš„ä»¤ç‰Œ
- **ä¸å¯é€†æ“ä½œ**: åˆ é™¤åæ— æ³•æ¢å¤ï¼Œè¯·è°¨æ…ä½¿ç”¨
- **æ¸…ç†ç›®çš„**: å‡å°‘æ•°æ®åº“å­˜å‚¨ç©ºé—´ï¼Œæ¸…ç†å†å²è®°å½•

##### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/admin/tokens/cleanup-revoked/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "message": "æˆåŠŸæ¸…ç† 23 ä¸ªå·²æ’¤é”€ä»¤ç‰Œ",
    "deleted_count": 23
}
```

##### é”™è¯¯å“åº”
```json
{
    "error": "æ¸…ç†å·²æ’¤é”€ä»¤ç‰Œå¤±è´¥: æ•°æ®åº“è¿æ¥é”™è¯¯"
}
```

### 4. ç§¯åˆ†ç®¡ç†æ¥å£

#### ç§¯åˆ†è®°å½•ç®¡ç†è¯´æ˜

ç§¯åˆ†ç®¡ç†ç³»ç»Ÿæ”¯æŒå®Œæ•´çš„CRUDæ“ä½œï¼ŒåŒ…æ‹¬æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤ç§¯åˆ†ä½¿ç”¨è®°å½•ã€‚ç¼–è¾‘ç§¯åˆ†è®°å½•æ—¶ä¼šè‡ªåŠ¨åŒæ­¥ä»¥ä¸‹æ•°æ®ï¼š

##### æ•°æ®åŒæ­¥æœºåˆ¶
1. **points_afterå­—æ®µ**: æ ¹æ® `points_before - points_used` è‡ªåŠ¨é‡æ–°è®¡ç®—
2. **ç”¨æˆ·ç§¯åˆ†ä½™é¢**: æ ¹æ®ç§¯åˆ†å·®å€¼è‡ªåŠ¨è°ƒæ•´ç”¨æˆ·å½“å‰ç§¯åˆ†
3. **ç»Ÿè®¡æ•°æ®**: å®æ—¶æ›´æ–°æ€»æ¶ˆè€—ã€å¹³å‡æ¶ˆè€—ç­‰ç»Ÿè®¡æŒ‡æ ‡

##### é¡¹ç›®ç±»å‹æ˜ å°„
- ç§¯åˆ†è®°å½•ä¸­çš„ `project_category` å­—æ®µå…³è” `project_categories` è¡¨
- å‰ç«¯æ˜¾ç¤ºæ—¶è‡ªåŠ¨æ˜ å°„ä¸ºé¡¹ç›®ç±»åˆ«çš„ `name` å­—æ®µ
- æ”¯æŒæŒ‰é¡¹ç›®ç±»å‹ç­›é€‰ç§¯åˆ†è®°å½•

#### 4.1 è·å–ç§¯åˆ†è®°å½•åˆ—è¡¨

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/points/records/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–ç§¯åˆ†ä½¿ç”¨è®°å½•åˆ—è¡¨ï¼ˆç®¡ç†å‘˜è§†å›¾ï¼Œæ‰€æœ‰ç”¨æˆ·ï¼‰

##### æŸ¥è¯¢å‚æ•°
- `user_id`: ç”¨æˆ·IDç­›é€‰
- `username`: ç”¨æˆ·åç­›é€‰ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰
- `project_category`: é¡¹ç›®åˆ†ç±»ID
- `start_date`: å¼€å§‹æ—¥æœŸ (YYYY-MM-DD)
- `end_date`: ç»“æŸæ—¥æœŸ (YYYY-MM-DD)
- `ordering`: æ’åºå­—æ®µ (usage_time, points_used, -usage_time, -points_used)
- `page`: é¡µç 
- `page_size`: æ¯é¡µæ•°é‡

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/points/records/?username=alice&start_date=2025-08-01&page=1
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "count": 11,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": 1,
            "user": {
                "id": 2,
                "username": "alice",
                "phone_number": "13800138001"
            },
            "user_username": "alice",
            "project_category": {
                "id": 1,
                "name": "ComfyUI",
                "code": "comfyui"
            },
            "usage_item_id": 123,
            "points_before": 1000,
            "points_after": 950,
            "points_used": 50,
            "usage_time": "2025-08-04T09:40:26Z",
            "description": "ComfyUIå·¥ä½œæµç”Ÿå›¾"
        }
    ]
}
```

#### 4.2 è·å–ç§¯åˆ†ç»Ÿè®¡ä¿¡æ¯

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/points/statistics/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–ç§¯åˆ†ç»Ÿè®¡ä¿¡æ¯

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/points/statistics/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "total_points_used": 250,
    "active_users_count": 2,
    "today_points_used": 10,
    "average_points_per_user": 22.73,
    "project_distribution": [
        {
            "project_category__name": "ComfyUI",
            "total_points": 200
        },
        {
            "project_category__name": "WebUI",
            "total_points": 50
        }
    ]
}
```

#### 4.3 æ‰¹é‡è°ƒæ•´ç”¨æˆ·ç§¯åˆ†

##### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/admin/points/adjust/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: æ‰¹é‡è°ƒæ•´ç”¨æˆ·ç§¯åˆ†

##### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/admin/points/adjust/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "usernames": "alice,bob,charlie",
    "points": 100,
    "description": "ç³»ç»Ÿå¥–åŠ±ç§¯åˆ†"
}
```

##### å“åº”ç¤ºä¾‹
```json
{
    "message": "ç§¯åˆ†è°ƒæ•´æˆåŠŸ",
    "success_count": 3,
    "failed_users": []
}
```

#### 4.4 è·å–ç§¯åˆ†è®°å½•è¯¦æƒ…

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/points/records/{record_id}/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–æŒ‡å®šç§¯åˆ†è®°å½•çš„è¯¦ç»†ä¿¡æ¯

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/points/records/123/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "id": 123,
    "user_id": 2,
    "user_username": "alice",
    "project_category": {
        "id": 1,
        "name": "ComfyUIå·¥ä½œæµ",
        "code": "comfyui"
    },
    "usage_item_id": "workflow_001",
    "points_before": 410,
    "points_after": 395,
    "points_used": 15,
    "usage_time": "2025-08-04T09:40:26Z",
    "description": "APIæµ‹è¯•åˆ›å»ºçš„ç§¯åˆ†ä½¿ç”¨è®°å½•"
}
```

#### 4.5 æ›´æ–°ç§¯åˆ†è®°å½•

##### æ¥å£ä¿¡æ¯
- **URL**: `PUT /api/admin/points/records/{record_id}/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: æ›´æ–°ç§¯åˆ†è®°å½•çš„æ¶ˆè€—ç§¯åˆ†å’Œæè¿°ï¼Œè‡ªåŠ¨åŒæ­¥ç›¸å…³æ•°æ®

##### åŠŸèƒ½è¯´æ˜
- **è‡ªåŠ¨è®¡ç®—**: æ ¹æ®æ–°çš„æ¶ˆè€—ç§¯åˆ†è‡ªåŠ¨é‡æ–°è®¡ç®— `points_after`
- **ç”¨æˆ·ç§¯åˆ†åŒæ­¥**: æ ¹æ®ç§¯åˆ†å·®å€¼è‡ªåŠ¨è°ƒæ•´ç”¨æˆ·å½“å‰ç§¯åˆ†ä½™é¢
- **æ•°æ®ä¸€è‡´æ€§**: ç¡®ä¿æ‰€æœ‰ç›¸å…³æ•°æ®ä¿æŒä¸€è‡´

##### è¯·æ±‚ç¤ºä¾‹
```http
PUT /api/admin/points/records/123/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "points_used": 15,
    "description": "æ›´æ–°åçš„æè¿°"
}
```

##### å“åº”ç¤ºä¾‹
```json
{
    "message": "ç§¯åˆ†è®°å½•æ›´æ–°æˆåŠŸ",
    "record": {
        "id": 123,
        "points_used": 15,
        "points_after": 395,
        "description": "æ›´æ–°åçš„æè¿°",
        "user_current_points": 385
    }
}
```

##### é”™è¯¯å“åº”
```json
{
    "error": "æ¶ˆè€—ç§¯åˆ†ä¸èƒ½ä¸ºè´Ÿæ•°"
}
```

#### 4.6 åˆ é™¤ç§¯åˆ†è®°å½•

##### æ¥å£ä¿¡æ¯
- **URL**: `DELETE /api/admin/points/records/{record_id}/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: åˆ é™¤ç§¯åˆ†è®°å½•å¹¶æ¢å¤ç”¨æˆ·ç§¯åˆ†

##### åŠŸèƒ½è¯´æ˜
- **ç§¯åˆ†æ¢å¤**: åˆ é™¤è®°å½•æ—¶è‡ªåŠ¨å°†æ¶ˆè€—çš„ç§¯åˆ†è¿”è¿˜ç»™ç”¨æˆ·
- **æ•°æ®æ¸…ç†**: å½»åº•åˆ é™¤ç§¯åˆ†ä½¿ç”¨è®°å½•
- **å®¡è®¡å®‰å…¨**: å»ºè®®è°¨æ…ä½¿ç”¨ï¼Œé‡è¦è®°å½•å»ºè®®ä¿ç•™

##### è¯·æ±‚ç¤ºä¾‹
```http
DELETE /api/admin/points/records/123/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "message": "ç§¯åˆ†è®°å½•åˆ é™¤æˆåŠŸï¼Œç”¨æˆ·ç§¯åˆ†å·²æ¢å¤",
    "restored_points": 15,
    "user_current_points": 400
}
```

##### é”™è¯¯å“åº”
```json
{
    "error": "ç§¯åˆ†è®°å½•ä¸å­˜åœ¨"
}
```

#### 4.7 ç§¯åˆ†è¶‹åŠ¿å›¾è¡¨æ•°æ®

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/points/charts/trend/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–ç§¯åˆ†æ¶ˆè€—è¶‹åŠ¿å›¾è¡¨æ•°æ®ï¼ˆæœ€è¿‘30å¤©ï¼‰

##### åŠŸèƒ½è¯´æ˜
- **æ—¶é—´èŒƒå›´**: è·å–æœ€è¿‘30å¤©çš„ç§¯åˆ†æ¶ˆè€—è¶‹åŠ¿
- **æ•°æ®èšåˆ**: æŒ‰æ—¥æœŸåˆ†ç»„ç»Ÿè®¡æ¯æ—¥ç§¯åˆ†æ¶ˆè€—
- **å®Œæ•´æ—¥æœŸ**: åŒ…å«æ²¡æœ‰æ¶ˆè€—è®°å½•çš„æ—¥æœŸï¼ˆæ˜¾ç¤ºä¸º0ï¼‰
- **å›¾è¡¨å‹å¥½**: æ•°æ®æ ¼å¼é€‚åˆå‰ç«¯å›¾è¡¨ç»„ä»¶ç›´æ¥ä½¿ç”¨

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/points/charts/trend/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "labels": ["12/08", "12/09", "12/10", "12/11", "12/12", "12/13", "12/14"],
    "values": [0, 50, 30, 0, 75, 120, 25]
}
```

#### 4.8 é¡¹ç›®ç±»å‹åˆ†å¸ƒå›¾è¡¨æ•°æ®

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/points/charts/project-distribution/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–æŒ‰é¡¹ç›®ç±»å‹çš„ç§¯åˆ†æ¶ˆè€—åˆ†å¸ƒæ•°æ®

##### åŠŸèƒ½è¯´æ˜
- **é¡¹ç›®åˆ†ç±»**: æŒ‰é¡¹ç›®ç±»åˆ«ç»Ÿè®¡ç§¯åˆ†æ¶ˆè€—
- **æ’åº**: æŒ‰æ¶ˆè€—ç§¯åˆ†ä»é«˜åˆ°ä½æ’åº
- **ç±»åˆ«æ˜ å°„**: æ­£ç¡®æ˜¾ç¤ºé¡¹ç›®ç±»åˆ«åç§°
- **é¥¼å›¾æ•°æ®**: é€‚åˆé¥¼å›¾æˆ–ç¯å½¢å›¾æ˜¾ç¤º

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/points/charts/project-distribution/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "labels": ["ComfyUI", "WebUI", "å¯¹è¯", "å…¶ä»–"],
    "values": [150, 75, 45, 20]
}
```

#### 4.9 ç§¯åˆ†è®°å½•å¯¼å‡ºåŠŸèƒ½

##### åŠŸèƒ½è¯´æ˜
ç§¯åˆ†ç®¡ç†é¡µé¢æä¾›äº†å®Œæ•´çš„å‰ç«¯CSVå¯¼å‡ºåŠŸèƒ½ï¼Œæ— éœ€åç«¯APIæ”¯æŒã€‚

##### å¯¼å‡ºæ¨¡å¼
1. **å…¨éƒ¨è®°å½•å¯¼å‡º**: å¯¼å‡ºå½“å‰é¡µé¢åŠ è½½çš„æ‰€æœ‰ç§¯åˆ†è®°å½•
2. **ç­›é€‰ç»“æœå¯¼å‡º**: å¯¼å‡ºå½“å‰ç­›é€‰æ¡ä»¶ä¸‹çš„è®°å½•
3. **æ‰¹é‡é€‰ä¸­å¯¼å‡º**: å¯¼å‡ºç”¨æˆ·å‹¾é€‰çš„ç‰¹å®šè®°å½•

##### å¯¼å‡ºå­—æ®µè¯´æ˜
| å­—æ®µå | è¯´æ˜ | æ•°æ®æ¥æº |
|--------|------|----------|
| ç”¨æˆ·å | ç§¯åˆ†ä½¿ç”¨è€… | `user_username` å­—æ®µ |
| æ¶ˆè€—ç§¯åˆ† | æœ¬æ¬¡æ¶ˆè€—çš„ç§¯åˆ†æ•°é‡ | `points_used` å­—æ®µ |
| é¡¹ç›®ç±»å‹ | é¡¹ç›®ç±»åˆ«åç§° | `project_category_name` å­—æ®µ |
| æè¿° | ç§¯åˆ†ä½¿ç”¨æè¿° | `description` å­—æ®µ |
| ä½¿ç”¨æ—¶é—´ | ç§¯åˆ†ä½¿ç”¨æ—¶é—´ | `usage_time` å­—æ®µï¼ˆæ ¼å¼åŒ–ï¼‰ |

##### æ–‡ä»¶å‘½åè§„åˆ™
```javascript
// å…¨éƒ¨è®°å½•
`ç§¯åˆ†è®°å½•_${YYYY-MM-DD}.csv`

// ç­›é€‰ç»“æœ
`ç§¯åˆ†è®°å½•_ç­›é€‰ç»“æœ_${YYYY-MM-DD}.csv`

// æ‰¹é‡é€‰ä¸­
`ç§¯åˆ†è®°å½•_é€‰ä¸­_${YYYY-MM-DD}.csv`
```

##### æŠ€æœ¯å®ç°
- **ç¼–ç æ ¼å¼**: UTF-8 with BOMï¼ˆè§£å†³ä¸­æ–‡ä¹±ç ï¼‰
- **æ•°æ®å¤„ç†**: å‰ç«¯JavaScriptå®ç°
- **ä¸‹è½½æ–¹å¼**: Blob API + ä¸´æ—¶é“¾æ¥
- **é¡¹ç›®ç±»å‹æ˜ å°„**: æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡åç§°è€ŒéID

##### å¯¼å‡ºç¤ºä¾‹
```csv
ç”¨æˆ·å,æ¶ˆè€—ç§¯åˆ†,é¡¹ç›®ç±»å‹,æè¿°,ä½¿ç”¨æ—¶é—´
"alice",10,"ComfyUI","APIæµ‹è¯•åˆ›å»ºçš„ç§¯åˆ†ä½¿ç”¨è®°å½•","2025/7/25 11:49:30"
"admin",50,"ComfyUI","ComfyUIå·¥ä½œæµç”Ÿå›¾","2025/7/25 10:35:44"
"admin",30,"WebUI","WebUIç”Ÿå›¾","2025/7/25 10:35:44"
"alice",20,"å¯¹è¯","AIå¯¹è¯æœåŠ¡","2025/7/25 10:35:44"
```

##### ç­›é€‰æ”¯æŒ
- **ç”¨æˆ·ç­›é€‰**: æŒ‰ç”¨æˆ·åæ¨¡ç³Šæœç´¢
- **é¡¹ç›®ç±»å‹ç­›é€‰**: æŒ‰é¡¹ç›®ç±»åˆ«ç²¾ç¡®ç­›é€‰
- **æ—¥æœŸèŒƒå›´ç­›é€‰**: ä»Šå¤©ã€æœ¬å‘¨ã€æœ¬æœˆã€æœ¬å­£åº¦
- **å¤åˆç­›é€‰**: æ”¯æŒå¤šæ¡ä»¶ç»„åˆç­›é€‰

### 5. ç”Ÿå›¾è®°å½•ç®¡ç†æ¥å£

#### 5.1 è·å–ç”Ÿå›¾è®°å½•åˆ—è¡¨

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/generations/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–ç”Ÿå›¾è®°å½•åˆ—è¡¨ï¼Œæ”¯æŒæŒ‰ç”¨æˆ·ã€æ—¶é—´ã€é¡¹ç›®ç±»å‹ç­›é€‰

##### æŸ¥è¯¢å‚æ•°
- `user_id`: ç”¨æˆ·IDç­›é€‰
- `user`: ç”¨æˆ·åç­›é€‰ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰
- `project`: é¡¹ç›®ç±»å‹ç­›é€‰ (comfyui, webui)
- `time_range`: æ—¶é—´èŒƒå›´ (today, week, month)
- `created_after`: åˆ›å»ºæ—¶é—´èµ·å§‹ (YYYY-MM-DD)
- `created_before`: åˆ›å»ºæ—¶é—´ç»“æŸ (YYYY-MM-DD)
- `ordering`: æ’åºå­—æ®µ (created_at, -created_at)
- `page`: é¡µç 
- `page_size`: æ¯é¡µæ•°é‡

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/generations/?user=alice&project=webui&time_range=week&page=1
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "count": 3,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": 1,
            "user_id": 1,
            "user": {
                "id": 1,
                "username": "admin",
                "phone_number": "13800138000"
            },
            "username": "admin",
            "project_type": "webui",
            "prompt": "a beautiful landscape",
            "params": {
                "width": 512,
                "height": 512,
                "steps": 20
            },
            "image_urls": [
                "https://example.com/image1.jpg",
                "https://example.com/image2.jpg"
            ],
            "is_public": false,
            "created_at": "2025-07-24T18:03:35Z"
        }
    ]
}
```

#### 5.2 è·å–ç”Ÿå›¾è®°å½•è¯¦æƒ…

##### æ¥å£ä¿¡æ¯
- **URL**: `GET /api/admin/generations/{id}/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: è·å–ç”Ÿå›¾è®°å½•è¯¦ç»†ä¿¡æ¯

##### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/admin/generations/123/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "id": 123,
    "user_id": 1,
    "username": "admin",
    "project_type": "webui",
    "prompt": "a beautiful landscape with mountains and rivers",
    "params": {
        "width": 512,
        "height": 512,
        "steps": 20,
        "cfg_scale": 7.5,
        "sampler": "DPM++ 2M Karras"
    },
    "image_urls": [
        "https://example.com/image1.jpg",
        "https://example.com/image2.jpg"
    ],
    "source_config_id": 456,
    "is_public": false,
    "visible_from": null,
    "visible_to": null,
    "created_at": "2025-07-24T18:03:35Z"
}
```

#### 5.3 åˆ é™¤ç”Ÿå›¾è®°å½•

##### æ¥å£ä¿¡æ¯
- **URL**: `DELETE /api/admin/generations/{id}/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: åˆ é™¤æŒ‡å®šç”Ÿå›¾è®°å½•

##### è¯·æ±‚ç¤ºä¾‹
```http
DELETE /api/admin/generations/123/
Authorization: Bearer <access_token>
```

##### å“åº”ç¤ºä¾‹
```json
{
    "message": "ç”Ÿå›¾è®°å½•åˆ é™¤æˆåŠŸ"
}
```

#### 5.4 ç¼–è¾‘ç”Ÿå›¾è®°å½•

##### æ¥å£ä¿¡æ¯
- **URL**: `PUT /api/admin/generations/{id}/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: ç¼–è¾‘ç”Ÿå›¾è®°å½•ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç§¯åˆ†æ¶ˆè€—

##### åŠŸèƒ½ç‰¹æ€§
- **åŸºæœ¬ä¿¡æ¯ç¼–è¾‘**: æ”¯æŒä¿®æ”¹æç¤ºè¯ã€å‚æ•°ã€å›¾ç‰‡URLã€å…¬å¼€çŠ¶æ€
- **é¡¹ç›®åˆ†ç±»ä¿®æ”¹**: æ”¯æŒæ›´æ”¹é¡¹ç›®åˆ†ç±»
- **ç§¯åˆ†æ¶ˆè€—ç¼–è¾‘**: æ”¯æŒä¿®æ”¹æ¶ˆè€—ç§¯åˆ†ï¼Œè‡ªåŠ¨åŒæ­¥ç”¨æˆ·ç§¯åˆ†ä½™é¢
- **ç§¯åˆ†è®°å½•ç®¡ç†**: è‡ªåŠ¨åˆ›å»ºæˆ–æ›´æ–°å…³è”çš„ç§¯åˆ†ä½¿ç”¨è®°å½•
- **æ•°æ®ä¸€è‡´æ€§**: ç¡®ä¿ç”Ÿå›¾è®°å½•å’Œç§¯åˆ†è®°å½•æ•°æ®ä¸€è‡´

##### è¯·æ±‚ç¤ºä¾‹
```http
PUT /api/admin/generations/123/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "prompt": "æ›´æ–°åçš„æç¤ºè¯",
    "params": {
        "width": 768,
        "height": 768,
        "steps": 30
    },
    "image_urls": [
        "https://example.com/new-image1.jpg",
        "https://example.com/new-image2.jpg"
    ],
    "is_public": true,
    "project_category_id": 2,
    "points_used": 75
}
```

##### å“åº”ç¤ºä¾‹
```json
{
    "message": "ç”Ÿå›¾è®°å½•æ›´æ–°æˆåŠŸ",
    "generation": {
        "id": "123",
        "project_category_id": 2,
        "prompt": "æ›´æ–°åçš„æç¤ºè¯",
        "params": {
            "width": 768,
            "height": 768,
            "steps": 30
        },
        "image_urls": [
            "https://example.com/new-image1.jpg",
            "https://example.com/new-image2.jpg"
        ],
        "thumbnail_url": "https://example.com/new-image1.jpg",
        "is_public": true,
        "points_used": 75
    }
}
```

##### ç§¯åˆ†å¤„ç†è¯´æ˜
- **æ›´æ–°ç°æœ‰è®°å½•**: å¦‚æœå·²æœ‰ç§¯åˆ†è®°å½•ï¼Œæ›´æ–°æ¶ˆè€—ç§¯åˆ†å¹¶è°ƒæ•´ç”¨æˆ·ä½™é¢
- **åˆ›å»ºæ–°è®°å½•**: å¦‚æœæ²¡æœ‰ç§¯åˆ†è®°å½•ä¸”ç§¯åˆ†>0ï¼Œåˆ›å»ºæ–°çš„ç§¯åˆ†ä½¿ç”¨è®°å½•
- **ç”¨æˆ·ç§¯åˆ†åŒæ­¥**: æ ¹æ®ç§¯åˆ†å·®å€¼è‡ªåŠ¨è°ƒæ•´ç”¨æˆ·å½“å‰ç§¯åˆ†
- **æ•°æ®å®Œæ•´æ€§**: ç¡®ä¿ç§¯åˆ†è®°å½•çš„`points_before`å’Œ`points_after`å­—æ®µæ­£ç¡®

#### 5.5 æ‰¹é‡åˆ é™¤ç”Ÿå›¾è®°å½•

##### æ¥å£ä¿¡æ¯
- **URL**: `POST /api/admin/generations/batch-delete/`
- **æƒé™**: ç®¡ç†å‘˜
- **æè¿°**: æ‰¹é‡åˆ é™¤ç”Ÿå›¾è®°å½•

##### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/admin/generations/batch-delete/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "record_ids": [1, 2, 3, 4]
}
```

##### å“åº”ç¤ºä¾‹
```json
{
    "message": "æ‰¹é‡åˆ é™¤æˆåŠŸ",
    "deleted_count": 4
}
```

---

## IDä½¿ç”¨æœ€ä½³å®è·µ

### ğŸ¯ éšæœºIDç‰¹æ€§è¯´æ˜

ç”±äºç³»ç»Ÿå·²å®ç°éšæœºIDç”Ÿæˆï¼Œå¼€å‘è€…åœ¨ä½¿ç”¨APIæ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹è¦ç‚¹ï¼š

#### âœ… æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼
```javascript
// âœ… æ­£ç¡®ï¼šé€šè¿‡APIè·å–ID
const response = await fetch('/api/auth/users/', {
    headers: { 'Authorization': `Bearer ${token}` }
});
const users = await response.json();
users.results.forEach(user => {
    console.log(`ç”¨æˆ·ID: ${user.id}`); // å¦‚ï¼š4115361349489737397
});

// âœ… æ­£ç¡®ï¼šä½¿ç”¨IDè¿›è¡ŒAPIè°ƒç”¨
const userId = 4115361349489737397;
const userDetail = await fetch(`/api/admin/users/${userId}/`);

// âœ… æ­£ç¡®ï¼šIDä½œä¸ºå”¯ä¸€æ ‡è¯†ç¬¦ä½¿ç”¨
const userMap = new Map();
users.forEach(user => userMap.set(user.id, user));
```

#### âŒ é”™è¯¯çš„ä½¿ç”¨æ–¹å¼
```javascript
// âŒ é”™è¯¯ï¼šä¸è¦ä¾èµ–IDçš„é¡ºåºæ€§
const users = await getUsers();
users.sort((a, b) => a.id - b.id); // IDä¸å†æŒ‰æ—¶é—´æ’åºï¼

// âŒ é”™è¯¯ï¼šä¸è¦é€šè¿‡IDæ¨æµ‹ä¿¡æ¯
const userId = 1000001;
console.log("è¿™æ˜¯ç¬¬1000001ä¸ªç”¨æˆ·"); // é”™è¯¯ï¼IDæ˜¯éšæœºçš„

// âŒ é”™è¯¯ï¼šä¸è¦å°è¯•éå†ID
for (let id = 1; id <= 1000000; id++) {
    await fetch(`/api/admin/users/${id}/`); // æ— æ•ˆï¼IDä¸è¿ç»­
}

// âŒ é”™è¯¯ï¼šä¸è¦åŸºäºIDå¤§å°åˆ¤æ–­åˆ›å»ºæ—¶é—´
if (userA.id > userB.id) {
    console.log("ç”¨æˆ·Aæ¯”ç”¨æˆ·Bæ³¨å†Œå¾—æ™š"); // é”™è¯¯ï¼IDéšæœº
}
```

### ğŸ“Š APIå“åº”ä¸­çš„IDå­—æ®µ

#### ç”¨æˆ·ç›¸å…³ID
```json
{
    "id": 4115361349489737397,           // ç”¨æˆ·IDï¼ˆéšæœºï¼‰
    "username": "testuser",
    "created_at": "2025-08-05T12:30:00Z" // ä½¿ç”¨æ—¶é—´å­—æ®µåˆ¤æ–­é¡ºåº
}
```

#### é…ç½®ç›¸å…³ID
```json
{
    "id": 6416157825986189457,           // é…ç½®IDï¼ˆéšæœºï¼‰
    "owner_id": 4115361349489737397,     // æ‹¥æœ‰è€…IDï¼ˆéšæœºï¼‰
    "project_category_id": 2164238018644507186, // é¡¹ç›®åˆ†ç±»IDï¼ˆéšæœºï¼‰
    "name": "æˆ‘çš„é…ç½®"
}
```

#### ç”Ÿå›¾è®°å½•ID
```json
{
    "id": 5507272166823098638,           // ç”Ÿå›¾è®°å½•IDï¼ˆéšæœºï¼‰
    "owner_id": 4115361349489737397,     // æ‹¥æœ‰è€…IDï¼ˆéšæœºï¼‰
    "source_config_id": 6416157825986189457, // é…ç½®IDï¼ˆéšæœºï¼‰
    "created_at": "2025-08-05T12:35:00Z"
}
```

### ğŸ” æŸ¥è¯¢å’Œç­›é€‰å»ºè®®

#### æ¨èçš„æŸ¥è¯¢æ–¹å¼
```javascript
// âœ… ä½¿ç”¨æ—¶é—´å­—æ®µæ’åº
const users = await fetch('/api/auth/users/?ordering=-created_at');

// âœ… ä½¿ç”¨ç­›é€‰å‚æ•°
const recentUsers = await fetch('/api/auth/users/?created_at__gte=2025-08-01');

// âœ… ä½¿ç”¨æœç´¢åŠŸèƒ½
const searchUsers = await fetch('/api/auth/users/?search=username');

// âœ… ä½¿ç”¨åˆ†é¡µ
const page2 = await fetch('/api/auth/users/?page=2');
```

#### å¤–é”®å…³è”æŸ¥è¯¢
```javascript
// âœ… é€šè¿‡å¤–é”®IDæŸ¥è¯¢å…³è”æ•°æ®
const configId = 6416157825986189457;
const generations = await fetch(`/api/admin/generations/?source_config_id=${configId}`);

// âœ… ä½¿ç”¨ç”¨æˆ·IDæŸ¥è¯¢å…¶é…ç½®
const userId = 4115361349489737397;
const userConfigs = await fetch(`/api/admin/configs/?owner_id=${userId}`);
```

### âš ï¸ é‡è¦æé†’

1. **IDä»…ä½œä¸ºå”¯ä¸€æ ‡è¯†ç¬¦**: ä¸è¦ä»IDä¸­æ¨æµ‹ä»»ä½•ä¸šåŠ¡ä¿¡æ¯
2. **ä½¿ç”¨æ—¶é—´å­—æ®µæ’åº**: éœ€è¦æŒ‰æ—¶é—´æ’åºæ—¶ä½¿ç”¨`created_at`ç­‰æ—¶é—´å­—æ®µ
3. **IDç±»å‹ä¸ºæ•°å­—**: è™½ç„¶æ˜¯éšæœºç”Ÿæˆï¼Œä½†ä»ä¸ºBIGINTç±»å‹
4. **å¤–é”®å…³ç³»æ­£å¸¸**: æ‰€æœ‰è¡¨é—´çš„å…³è”å…³ç³»å®Œå…¨æ­£å¸¸
5. **APIæ¥å£ä¸å˜**: æ‰€æœ‰æ¥å£çš„ä½¿ç”¨æ–¹å¼ä¿æŒä¸€è‡´

---

## é”™è¯¯ç è¯´æ˜

### HTTPçŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜ | ç¤ºä¾‹åœºæ™¯ |
|--------|------|----------|
| 200 | è¯·æ±‚æˆåŠŸ | è·å–æ•°æ®æˆåŠŸ |
| 201 | åˆ›å»ºæˆåŠŸ | ç”¨æˆ·æ³¨å†Œã€åˆ›å»ºè®°å½• |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ•°æ®éªŒè¯å¤±è´¥ |
| 401 | æœªè®¤è¯ | Tokenæ— æ•ˆæˆ–è¿‡æœŸ |
| 403 | æƒé™ä¸è¶³ | éç®¡ç†å‘˜è®¿é—®ç®¡ç†æ¥å£ |
| 404 | èµ„æºä¸å­˜åœ¨ | è¯·æ±‚çš„æ•°æ®ä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | ç³»ç»Ÿå¼‚å¸¸ |

### ä¸šåŠ¡é”™è¯¯ç 

#### ç”¨æˆ·è®¤è¯ç›¸å…³
- `USER_NOT_FOUND`: ç”¨æˆ·ä¸å­˜åœ¨
- `INVALID_PASSWORD`: å¯†ç é”™è¯¯
- `TOKEN_EXPIRED`: Tokenå·²è¿‡æœŸ
- `TOKEN_INVALID`: Tokenæ— æ•ˆ
- `PERMISSION_DENIED`: æƒé™ä¸è¶³

#### ç§¯åˆ†ç³»ç»Ÿç›¸å…³
- `INSUFFICIENT_POINTS`: ç§¯åˆ†ä¸è¶³
- `INVALID_PROJECT_CATEGORY`: é¡¹ç›®åˆ†ç±»ä¸å­˜åœ¨
- `POINTS_MUST_POSITIVE`: ç§¯åˆ†å¿…é¡»å¤§äº0

#### æ•°æ®éªŒè¯ç›¸å…³
- `FIELD_REQUIRED`: å¿…å¡«å­—æ®µç¼ºå¤±
- `FIELD_INVALID`: å­—æ®µæ ¼å¼é”™è¯¯
- `DUPLICATE_VALUE`: å€¼é‡å¤ï¼ˆå¦‚ç”¨æˆ·åã€æ‰‹æœºå·ï¼‰

---

## æœªå®Œæˆæ¥å£è¯´æ˜

### 1. ç®¡ç†åå°æ¥å£ï¼ˆéƒ¨åˆ†å·²å®ç°ï¼‰
**çŠ¶æ€**: éƒ¨åˆ†å®ç° âœ…
**è¯´æ˜**: æ ¸å¿ƒç®¡ç†åå°æ¥å£å·²å®ç°ï¼ŒåŒ…æ‹¬ä»ªè¡¨ç›˜ã€ç”¨æˆ·ç®¡ç†ã€ä»¤ç‰Œç®¡ç†ã€ç§¯åˆ†ç®¡ç†ã€ç”Ÿå›¾è®°å½•ç®¡ç†

**å·²å®ç°æ¥å£** âœ…:

#### 1.1 ä»ªè¡¨ç›˜ç»Ÿè®¡æ¥å£ âœ…
- `GET /api/admin/dashboard/stats/` - è·å–ä»ªè¡¨ç›˜ç»Ÿè®¡æ•°æ® âœ…
- `GET /api/admin/dashboard/charts/user-growth/` - ç”¨æˆ·å¢é•¿è¶‹åŠ¿æ•°æ® âœ…
- `GET /api/admin/dashboard/charts/points-distribution/` - ç§¯åˆ†åˆ†å¸ƒå›¾è¡¨æ•°æ® âœ…
- `GET /api/admin/dashboard/recent-activities/` - æœ€è¿‘æ´»åŠ¨åˆ—è¡¨ âœ…

#### 1.2 ç”¨æˆ·ç®¡ç†æ¥å£ âœ…
- `GET /api/admin/users/` - ç”¨æˆ·ç®¡ç†åˆ—è¡¨ï¼ˆæ”¯æŒæœç´¢ã€ç­›é€‰ã€åˆ†é¡µï¼‰âœ…
- `PUT /api/admin/users/{id}/` - ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯ï¼ˆæ”¯æŒçŠ¶æ€åˆ‡æ¢ã€å®Œæ•´å­—æ®µç¼–è¾‘ï¼‰âœ…

#### 1.3 ä»¤ç‰Œç®¡ç†æ¥å£ âœ…
- `GET /api/admin/tokens/` - ä»¤ç‰Œåˆ—è¡¨ï¼ˆæ”¯æŒæŒ‰ç”¨æˆ·ã€ç±»å‹ã€æ’¤é”€çŠ¶æ€ç­›é€‰ï¼Œåˆ†é¡µæ˜¾ç¤ºï¼‰âœ…
- `DELETE /api/admin/tokens/{id}/` - æ’¤é”€å•ä¸ªä»¤ç‰Œï¼ˆè½¯åˆ é™¤æœºåˆ¶ï¼‰âœ…
- `POST /api/admin/tokens/batch-delete/` - æ‰¹é‡æ’¤é”€ä»¤ç‰Œ âœ…
- `POST /api/admin/tokens/cleanup-expired/` - æ¸…ç†è¿‡æœŸä»¤ç‰Œ âœ…
- `POST /api/admin/tokens/cleanup-revoked/` - æ¸…ç†å·²æ’¤é”€ä»¤ç‰Œï¼ˆç‰©ç†åˆ é™¤ï¼‰âœ…

#### 1.4 ç§¯åˆ†ç®¡ç†æ¥å£ âœ…
- `GET /api/admin/points/records/` - ç§¯åˆ†æµæ°´è®°å½•ï¼ˆç®¡ç†å‘˜è§†å›¾ï¼Œæ‰€æœ‰ç”¨æˆ·ï¼‰âœ…
- `GET /api/admin/points/statistics/` - ç§¯åˆ†ç»Ÿè®¡ä¿¡æ¯ âœ…
- `GET /api/admin/points/charts/trend/` - ç§¯åˆ†æ¶ˆè€—è¶‹åŠ¿å›¾è¡¨æ•°æ® âœ…
- `GET /api/admin/points/charts/project-distribution/` - é¡¹ç›®ç±»å‹åˆ†å¸ƒå›¾è¡¨æ•°æ® âœ…
- `POST /api/admin/points/adjust/` - æ‰¹é‡è°ƒæ•´ç”¨æˆ·ç§¯åˆ† âœ…
- `GET /api/admin/points/records/{id}/` - è·å–ç§¯åˆ†è®°å½•è¯¦æƒ… âœ…
- `PUT /api/admin/points/records/{id}/` - æ›´æ–°ç§¯åˆ†è®°å½•ï¼ˆè‡ªåŠ¨åŒæ­¥ç”¨æˆ·ç§¯åˆ†ï¼‰âœ…
- `DELETE /api/admin/points/records/{id}/` - åˆ é™¤ç§¯åˆ†è®°å½•ï¼ˆæ¢å¤ç”¨æˆ·ç§¯åˆ†ï¼‰âœ…
- **å‰ç«¯å¯¼å‡ºåŠŸèƒ½** - CSVæ ¼å¼å¯¼å‡ºç§¯åˆ†è®°å½•ï¼ˆæ”¯æŒå…¨éƒ¨/ç­›é€‰/æ‰¹é‡å¯¼å‡ºï¼‰âœ…

#### 1.5 ç”Ÿå›¾è®°å½•ç®¡ç†æ¥å£ âœ…
- `GET /api/admin/generations/` - ç”Ÿå›¾è®°å½•åˆ—è¡¨ï¼ˆæ”¯æŒæŒ‰ç”¨æˆ·ã€æ—¶é—´ã€é¡¹ç›®ç±»å‹ç­›é€‰ï¼ŒåŒ…å«ç§¯åˆ†ä¿¡æ¯ï¼‰âœ…
- `GET /api/admin/generations/{id}/` - è·å–ç”Ÿå›¾è®°å½•è¯¦æƒ…ï¼ˆåŒ…å«ç§¯åˆ†ä¿¡æ¯ï¼‰âœ…
- `PUT /api/admin/generations/{id}/` - ç¼–è¾‘ç”Ÿå›¾è®°å½•ï¼ˆæ”¯æŒç§¯åˆ†ä¿®æ”¹å’ŒåŒæ­¥ï¼‰âœ…
- `DELETE /api/admin/generations/{id}/` - åˆ é™¤ç”Ÿå›¾è®°å½• âœ…
- `POST /api/admin/generations/batch-delete/` - æ‰¹é‡åˆ é™¤ç”Ÿå›¾è®°å½• âœ…

**å¾…å®ç°æ¥å£**:

#### 1.6 ç”¨æˆ·ç®¡ç†æ‰©å±•æ¥å£
- `GET /api/admin/users/{id}/` - è·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
- `POST /api/admin/users/{id}/toggle-status/` - å¯ç”¨/ç¦ç”¨ç”¨æˆ·ï¼ˆå·²é€šè¿‡ç¼–è¾‘æ¥å£å®ç°ï¼‰
- `POST /api/admin/users/{id}/kick-offline/` - è¸¢ç”¨æˆ·ä¸‹çº¿ï¼ˆæ’¤é”€æ‰€æœ‰tokenï¼‰
- `POST /api/admin/users/{id}/adjust-points/` - è°ƒæ•´ç”¨æˆ·ç§¯åˆ†

#### 1.7 ä»¤ç‰Œç®¡ç†æ‰©å±•æ¥å£
- `GET /api/admin/tokens/cleanup-task/status/` - è·å–å®šæ—¶æ¸…ç†ä»»åŠ¡çŠ¶æ€
- `POST /api/admin/tokens/cleanup-task/toggle/` - å¼€å¯/å…³é—­å®šæ—¶æ¸…ç†ä»»åŠ¡

#### 1.8 ä½¿ç”¨æƒ…å†µåˆ†ææ¥å£
- `GET /api/admin/usage/overview/` - ä½¿ç”¨æƒ…å†µæ¦‚è§ˆ
- `GET /api/admin/usage/by-project/` - æŒ‰é¡¹ç›®ç±»å‹ç»Ÿè®¡ä½¿ç”¨æƒ…å†µ
- `GET /api/admin/usage/user-preferences/` - ç”¨æˆ·åå¥½åˆ†æ
- `GET /api/admin/usage/popular-configs/` - çƒ­é—¨é…ç½®æ’è¡Œ

#### 1.9 ç”Ÿå›¾è®°å½•æ‰©å±•æ¥å£
- `GET /api/admin/generations/export/` - å¯¼å‡ºç”Ÿå›¾è®°å½•æ•°æ®

### 2. å¯†ç ç®¡ç†æ¥å£
**çŠ¶æ€**: éƒ¨åˆ†å®ç°
**è¯´æ˜**: ç”¨æˆ·å¯†ç ä¿®æ”¹å’Œé‡ç½®åŠŸèƒ½

**éœ€è¦å®ç°çš„æ¥å£**:
- `POST /api/auth/password/change/` - ä¿®æ”¹å¯†ç ï¼ˆéœ€è¦ç™»å½•ï¼‰
  - è¯·æ±‚ä½“ï¼š`{"old_password": "æ—§å¯†ç ", "new_password": "æ–°å¯†ç ", "new_password_confirm": "ç¡®è®¤æ–°å¯†ç "}`
  - å“åº”ï¼š`{"message": "å¯†ç ä¿®æ”¹æˆåŠŸ"}`
- `POST /api/auth/password/reset/` - å‘é€é‡ç½®é‚®ä»¶
- `POST /api/auth/password/reset/confirm/` - ç¡®è®¤é‡ç½®å¯†ç 

### 4. æ–‡ä»¶ä¸Šä¼ æ¥å£
**çŠ¶æ€**: æœªå®ç°
**è¯´æ˜**: å¤´åƒä¸Šä¼ ç­‰æ–‡ä»¶å¤„ç†åŠŸèƒ½

**è®¡åˆ’æ¥å£**:
- `POST /api/upload/avatar/` - å¤´åƒä¸Šä¼ 
- `POST /api/upload/files/` - é€šç”¨æ–‡ä»¶ä¸Šä¼ 

### 5. é€šçŸ¥ç³»ç»Ÿæ¥å£
**çŠ¶æ€**: æœªå®ç°
**è¯´æ˜**: ç”¨æˆ·é€šçŸ¥ã€ç³»ç»Ÿæ¶ˆæ¯åŠŸèƒ½

**è®¡åˆ’æ¥å£**:
- `GET /api/notifications/` - è·å–é€šçŸ¥åˆ—è¡¨
- `PUT /api/notifications/{id}/read/` - æ ‡è®°é€šçŸ¥å·²è¯»

### 6. æ•°æ®å¯¼å‡ºæ¥å£
**çŠ¶æ€**: éƒ¨åˆ†å®ç°
**è¯´æ˜**: å‰ç«¯å®ç°çš„CSVæ•°æ®å¯¼å‡ºåŠŸèƒ½

#### 6.1 ç§¯åˆ†è®°å½•å¯¼å‡º âœ…

##### åŠŸèƒ½è¯´æ˜
ç§¯åˆ†ç®¡ç†é¡µé¢æä¾›äº†å®Œæ•´çš„CSVå¯¼å‡ºåŠŸèƒ½ï¼Œæ”¯æŒå…¨éƒ¨è®°å½•å¯¼å‡ºå’Œç­›é€‰ç»“æœå¯¼å‡ºã€‚

##### å¯¼å‡ºåŠŸèƒ½ç‰¹æ€§
- **å…¨éƒ¨è®°å½•å¯¼å‡º**: å¯¼å‡ºæ‰€æœ‰ç§¯åˆ†ä½¿ç”¨è®°å½•
- **ç­›é€‰ç»“æœå¯¼å‡º**: å¯¼å‡ºå½“å‰ç­›é€‰æ¡ä»¶ä¸‹çš„è®°å½•
- **é¡¹ç›®ç±»å‹æ˜ å°„**: æ­£ç¡®æ˜¾ç¤ºé¡¹ç›®ç±»åˆ«åç§°ï¼ˆComfyUIã€WebUIã€å¯¹è¯ç­‰ï¼‰
- **ä¸­æ–‡æ”¯æŒ**: æ·»åŠ BOMå¤´è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜
- **æ™ºèƒ½æ–‡ä»¶å**: æ ¹æ®ç­›é€‰çŠ¶æ€è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶å

##### å¯¼å‡ºå­—æ®µ
```csv
ç”¨æˆ·å,æ¶ˆè€—ç§¯åˆ†,é¡¹ç›®ç±»å‹,æè¿°,ä½¿ç”¨æ—¶é—´
"alice",10,"ComfyUI","APIæµ‹è¯•åˆ›å»ºçš„ç§¯åˆ†ä½¿ç”¨è®°å½•","2025/7/25 11:49:30"
"admin",50,"ComfyUI","ComfyUIå·¥ä½œæµç”Ÿå›¾","2025/7/25 10:35:44"
"admin",30,"WebUI","WebUIç”Ÿå›¾","2025/7/25 10:35:44"
"alice",20,"å¯¹è¯","AIå¯¹è¯æœåŠ¡","2025/7/25 10:35:44"
```

##### æ–‡ä»¶å‘½åè§„åˆ™
- **å…¨éƒ¨è®°å½•**: `ç§¯åˆ†è®°å½•_YYYY-MM-DD.csv`
- **ç­›é€‰ç»“æœ**: `ç§¯åˆ†è®°å½•_ç­›é€‰ç»“æœ_YYYY-MM-DD.csv`
- **æ‰¹é‡å¯¼å‡º**: `ç§¯åˆ†è®°å½•_é€‰ä¸­_YYYY-MM-DD.csv`

##### å®ç°æ–¹å¼
- **å‰ç«¯å®ç°**: ä½¿ç”¨JavaScript Blob APIç”ŸæˆCSVæ–‡ä»¶
- **æ•°æ®æ¥æº**: åŸºäºå·²åŠ è½½çš„ç§¯åˆ†è®°å½•æ•°æ®
- **ç­›é€‰æ”¯æŒ**: æ”¯æŒç”¨æˆ·åã€é¡¹ç›®ç±»å‹ã€æ—¥æœŸèŒƒå›´ç­›é€‰
- **ç¼–ç å¤„ç†**: UTF-8ç¼–ç ï¼Œæ·»åŠ BOMå¤´é˜²æ­¢ä¹±ç 

#### 6.2 æ‰¹é‡æ“ä½œå¯¼å‡º âœ…

##### åŠŸèƒ½è¯´æ˜
æ”¯æŒé€‰ä¸­ç‰¹å®šè®°å½•è¿›è¡Œæ‰¹é‡å¯¼å‡ºï¼Œæä¾›ç²¾ç¡®çš„æ•°æ®å¯¼å‡ºæ§åˆ¶ã€‚

##### æ“ä½œæµç¨‹
1. åœ¨ç§¯åˆ†è®°å½•åˆ—è¡¨ä¸­å‹¾é€‰éœ€è¦å¯¼å‡ºçš„è®°å½•
2. ç‚¹å‡»"æ‰¹é‡å¯¼å‡º"æŒ‰é’®
3. è‡ªåŠ¨ç”ŸæˆåŒ…å«é€‰ä¸­è®°å½•çš„CSVæ–‡ä»¶
4. æ–‡ä»¶åè‡ªåŠ¨æ·»åŠ "_é€‰ä¸­"æ ‡è¯†

**æœªå®ç°æ¥å£**:
- `GET /api/export/users/` - å¯¼å‡ºç”¨æˆ·æ•°æ®
- `GET /api/export/generations/` - å¯¼å‡ºç”Ÿå›¾è®°å½•

### 7. ç§¯åˆ†å……å€¼æ¥å£
**çŠ¶æ€**: æœªå®ç°
**è¯´æ˜**: ç§¯åˆ†å……å€¼ã€è´­ä¹°åŠŸèƒ½

**è®¡åˆ’æ¥å£**:
- `POST /api/points/recharge/` - ç§¯åˆ†å……å€¼
- `GET /api/points/packages/` - ç§¯åˆ†å¥—é¤åˆ—è¡¨

---

## å¼€å‘å’Œæµ‹è¯•è¯´æ˜

### æµ‹è¯•è´¦å·
- **ç®¡ç†å‘˜**: username: `admin`, password: `admin123`
- **æ™®é€šç”¨æˆ·**: username: `alice`, password: `alice123`
- **å…¶ä»–ç”¨æˆ·**: username: `bob`, password: `user123`

### å¯†ç å®‰å…¨è¯´æ˜
- **å¯†ç æ ¼å¼**: æ‰€æœ‰ç”¨æˆ·å¯†ç å·²æ›´æ–°ä¸ºDjangoæ ‡å‡†PBKDF2æ ¼å¼
- **å®‰å…¨æ€§**: ä½¿ç”¨SHA256ç®—æ³•è¿›è¡Œå¯†ç å“ˆå¸Œ
- **éªŒè¯æœºåˆ¶**: åªæ¥å—PBKDF2æ ¼å¼å¯†ç ï¼Œæ‹’ç»å…¶ä»–æ ¼å¼
- **æ›´æ–°æ—¶é—´**: 2025-08-06 - å¯†ç å®‰å…¨æ€§å…¨é¢å‡çº§

### æµ‹è¯•å·¥å…·
- **è‡ªåŠ¨åŒ–æµ‹è¯•**: `python comprehensive_api_test.py`
- **å•ç‹¬æµ‹è¯•**: å„ç§ `test_*.py` æ–‡ä»¶
- **APIæ–‡æ¡£**: æœ¬æ–‡æ¡£

### æ³¨æ„äº‹é¡¹
1. æ‰€æœ‰æ—¶é—´å­—æ®µä½¿ç”¨ISO 8601æ ¼å¼
2. åˆ†é¡µé»˜è®¤æ¯é¡µ20æ¡è®°å½•
3. Tokenæœ‰æ•ˆæœŸï¼šAccess Token 30åˆ†é’Ÿï¼ŒRefresh Token 24å°æ—¶
4. ç§¯åˆ†ç³»ç»Ÿæ”¯æŒäº‹åŠ¡å®‰å…¨
5. ç®¡ç†å‘˜æƒé™é€šè¿‡ `system_role` å­—æ®µåˆ¤æ–­

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**: 2025-08-06
**APIç‰ˆæœ¬**: v1.0
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

## ğŸ‰ ç®¡ç†åå°ç³»ç»Ÿä¿®å¤å®Œæˆæ€»ç»“

### ä¿®å¤çš„æ ¸å¿ƒé—®é¢˜

#### 1. ç”¨æˆ·ç¼–è¾‘çŠ¶æ€åŠŸèƒ½ âœ…
- **é—®é¢˜**: ç”¨æˆ·çŠ¶æ€å­—æ®µç¼ºå¤±ï¼Œç¼–è¾‘åŠŸèƒ½ä¸å®Œæ•´
- **è§£å†³**: æ·»åŠ ç”¨æˆ·çŠ¶æ€å­—æ®µåˆ°ç¼–è¾‘è¡¨å•å’Œåç«¯åºåˆ—åŒ–å™¨
- **ç»“æœ**: æ”¯æŒæ´»è·ƒ/éæ´»è·ƒçŠ¶æ€åˆ‡æ¢ï¼Œæ•°æ®å®æ—¶æ›´æ–°

#### 2. ä»¤ç‰Œç®¡ç†æ‰¹é‡æ¸…ç†åŠŸèƒ½ âœ…
- **é—®é¢˜**: URLè·¯ç”±å†²çªå¯¼è‡´405é”™è¯¯
- **è§£å†³**: è°ƒæ•´URLè·¯ç”±é¡ºåºï¼Œå…·ä½“è·¯å¾„ä¼˜å…ˆäºé€šç”¨è·¯å¾„
- **ç»“æœ**: æ¸…ç†è¿‡æœŸå’Œå·²æ’¤é”€ä»¤ç‰ŒåŠŸèƒ½å®Œå…¨æ­£å¸¸

#### 3. ç§¯åˆ†ç®¡ç†å›¾è¡¨æ•°æ® âœ…
- **é—®é¢˜**: å›¾è¡¨æ˜¾ç¤ºå‡æ•°æ®ï¼Œç¼ºå°‘çœŸå®API
- **è§£å†³**: æ–°å¢è¶‹åŠ¿å›¾è¡¨å’Œåˆ†å¸ƒå›¾è¡¨APIï¼Œä¿®å¤å‰ç«¯è°ƒç”¨
- **ç»“æœ**: å›¾è¡¨æ˜¾ç¤ºçœŸå®æ•°æ®åº“æ•°æ®ï¼Œç»Ÿè®¡ä¿¡æ¯å‡†ç¡®

#### 4. ç”Ÿå›¾è®°å½•ç§¯åˆ†ä¿®æ”¹åŠŸèƒ½ âœ…
- **é—®é¢˜**: ç§¯åˆ†æ•°æ®æ˜¾ç¤ºå’Œç¼–è¾‘åŠŸèƒ½ç¼ºå¤±
- **è§£å†³**: å®ç°ç§¯åˆ†æ•°æ®å…³è”æŸ¥è¯¢å’Œç¼–è¾‘åŒæ­¥æœºåˆ¶
- **ç»“æœ**: æ”¯æŒç§¯åˆ†ä¿®æ”¹ï¼Œè‡ªåŠ¨åŒæ­¥ç”¨æˆ·ç§¯åˆ†ä½™é¢

### æŠ€æœ¯ä¿®å¤è¦ç‚¹

#### åç«¯ä¿®å¤
- **URLè·¯ç”±ä¼˜åŒ–**: è§£å†³è·¯å¾„åŒ¹é…å†²çªé—®é¢˜
- **APIå­—æ®µè¡¥å…¨**: æ·»åŠ ç¼ºå¤±çš„åºåˆ—åŒ–å™¨å­—æ®µ
- **æ•°æ®å…³è”ä¿®å¤**: æ­£ç¡®å¤„ç†æ¨¡å‹é—´çš„å…³è”å…³ç³»
- **æ–°å¢APIç«¯ç‚¹**: æä¾›å›¾è¡¨æ•°æ®å’Œç§¯åˆ†å¤„ç†æ¥å£

#### å‰ç«¯ä¿®å¤
- **APIè°ƒç”¨ä¿®å¤**: ä¿®æ­£é”™è¯¯çš„APIè°ƒç”¨æ–¹å¼
- **æ•°æ®ç»‘å®šä¿®å¤**: è§£å†³è¡¨å•æ•°æ®ç»‘å®šé—®é¢˜
- **çŠ¶æ€ç®¡ç†ä¼˜åŒ–**: æ”¹å–„æ•°æ®åˆ·æ–°å’ŒçŠ¶æ€æ›´æ–°

#### æ•°æ®åº“è®¾è®¡ç†è§£
- **ç”¨æˆ·çŠ¶æ€ç®¡ç†**: é€šè¿‡`is_active`å­—æ®µæ§åˆ¶
- **ç§¯åˆ†ç³»ç»Ÿè®¾è®¡**: `Generation`é€šè¿‡`PointUsageRecord`å…³è”ç§¯åˆ†
- **é¡¹ç›®åˆ†ç±»ç³»ç»Ÿ**: é€šè¿‡`ProjectCategory`ç®¡ç†ç±»å‹

### ç³»ç»ŸåŠŸèƒ½ç°çŠ¶

ç°åœ¨æ•´ä¸ªç®¡ç†åå°ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½å®Œå…¨æ­£å¸¸ï¼š
- âœ… **ç”¨æˆ·ç®¡ç†**: å®Œæ•´çš„ç”¨æˆ·ä¿¡æ¯ç¼–è¾‘å’ŒçŠ¶æ€ç®¡ç†
- âœ… **ä»¤ç‰Œç®¡ç†**: å®Œå–„çš„ä»¤ç‰Œæ’¤é”€å’Œæ¸…ç†æœºåˆ¶
- âœ… **ç§¯åˆ†ç®¡ç†**: çœŸå®æ•°æ®å›¾è¡¨å’Œå®Œæ•´çš„è®°å½•ç®¡ç†
- âœ… **ç”Ÿå›¾è®°å½•**: æ”¯æŒç§¯åˆ†ç¼–è¾‘çš„å®Œæ•´è®°å½•ç®¡ç†

æ‰€æœ‰åŠŸèƒ½éƒ½ç»è¿‡å®é™…æµ‹è¯•éªŒè¯ï¼Œç¡®ä¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç¨³å®šè¿è¡Œã€‚

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**: 2025-08-11
**APIç‰ˆæœ¬**: v1.1
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ